{"ast":null,"code":"import React,{useState,useEffect}from'react';import{Card,Table,InputNumber,Button,Space,Typography,Image,Empty,Checkbox,Row,Col,Divider,message,Select,Tooltip,Slider}from'antd';import{DeleteOutlined,ShoppingOutlined,QuestionCircleOutlined}from'@ant-design/icons';import{useDispatch,useSelector}from'react-redux';import{useNavigate}from'react-router-dom';import{updateQuantity,removeFromCart,clearCart,applyCoupon,applyPoints}from'../store/slices/cartSlice';import{CartService}from'../services/cartService';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const{Title,Text}=Typography;const{Option}=Select;// 模拟优惠券数据\nconst mockCoupons=[{id:1,name:'满100减10',description:'订单满100元减10元',type:'FIXED',value:10,minAmount:100,startDate:'2023-01-01',endDate:'2025-12-31',status:1},{id:2,name:'满200减25',description:'订单满200元减25元',type:'FIXED',value:25,minAmount:200,startDate:'2023-01-01',endDate:'2025-12-31',status:1},{id:3,name:'8折优惠',description:'订单满300元享8折优惠',type:'DISCOUNT',value:8,minAmount:300,startDate:'2023-01-01',endDate:'2025-12-31',status:1}];// 模拟用户ID\nconst MOCK_USER_ID=1;const CartPage=()=>{const navigate=useNavigate();const dispatch=useDispatch();const{items,totalAmount,coupon,pointsUsed,discountAmount,actualAmount}=useSelector(state=>state.cart);// 本地状态管理选中的商品\nconst[selectedItems,setSelectedItems]=useState([]);// 模拟用户积分\nconst[userPoints,setUserPoints]=useState(1000);// 可用的优惠券列表\nconst[availableCoupons,setAvailableCoupons]=useState([]);// 加载状态\nconst[loading,setLoading]=useState(false);// 加载购物车数据\nuseEffect(()=>{const fetchCartItems=async()=>{try{setLoading(true);// 这里可以从后端加载购物车数据\n// const cartItems = await CartService.getCartItems(MOCK_USER_ID);\n// 这里可以将后端数据同步到Redux状态\n}catch(error){console.error('获取购物车数据失败:',error);message.error('获取购物车数据失败');}finally{setLoading(false);}};fetchCartItems();},[]);// 根据购物车金额筛选可用优惠券\nuseEffect(()=>{const filtered=mockCoupons.filter(c=>c.minAmount<=totalAmount);setAvailableCoupons(filtered);// 如果当前选择的优惠券不再适用，则清除\nif(coupon&&coupon.minAmount>totalAmount){dispatch(applyCoupon(null));}},[totalAmount,coupon,dispatch]);// 处理数量变化\nconst handleQuantityChange=async(productId,quantity)=>{if(quantity>0){try{// 先更新本地Redux状态\ndispatch(updateQuantity({productId,quantity}));// 然后同步到后端\n// 注意：这里需要获取购物车项ID，这里简化处理\nconst cartItemId=productId;// 实际应用中需要从购物车项中获取真实ID\nawait CartService.updateCartItemQuantity(MOCK_USER_ID,cartItemId,quantity);}catch(error){console.error('更新购物车数量失败:',error);message.error('更新购物车数量失败');}}};// 删除商品\nconst handleRemoveItem=async productId=>{try{// 先更新本地Redux状态\ndispatch(removeFromCart(productId));// 然后同步到后端\nawait CartService.removeFromCartByProductId(MOCK_USER_ID,productId);message.success('商品已从购物车中移除');}catch(error){console.error('从购物车移除商品失败:',error);message.error('从购物车移除商品失败');}};// 清空购物车\nconst handleClearCart=async()=>{try{// 先更新本地Redux状态\ndispatch(clearCart());// 然后同步到后端\nawait CartService.clearCart(MOCK_USER_ID);message.success('购物车已清空');}catch(error){console.error('清空购物车失败:',error);message.error('清空购物车失败');}};// 切换商品选择状态\nconst handleToggleSelection=productId=>{setSelectedItems(prev=>prev.includes(productId)?prev.filter(id=>id!==productId):[...prev,productId]);};// 全选/取消全选\nconst handleSelectAll=checked=>{if(checked){setSelectedItems(items.map(item=>item.product.id));}else{setSelectedItems([]);}};// 选择优惠券\nconst handleCouponChange=couponId=>{if(couponId===null){dispatch(applyCoupon(null));}else{const selectedCoupon=mockCoupons.find(c=>c.id===couponId);if(selectedCoupon){dispatch(applyCoupon(selectedCoupon));}}};// 使用积分\nconst handlePointsChange=value=>{// 限制使用的积分不超过用户拥有的积分\nconst pointsValue=value||0;const limitedValue=Math.min(pointsValue,userPoints);// 限制使用的积分不超过订单金额的一半（按100积分=1元计算）\nconst maxPointsAllowed=Math.floor(totalAmount*50);const finalValue=Math.min(limitedValue,maxPointsAllowed);// 更新Redux状态\ndispatch(applyPoints(finalValue));// 这里可以调用后端API保存积分使用情况，但目前后端可能没有对应接口\n// 所以这部分暂时不实现\n};// 结算\nconst handleCheckout=()=>{const selectedCartItems=items.filter(item=>selectedItems.includes(item.product.id));if(selectedCartItems.length===0){message.warning('请选择要结算的商品');return;}// 获取选中商品的购物车项ID，用于创建订单\nconst cartItemIds=selectedCartItems.map(item=>item.product.id);// 实际应用中应该使用真实的购物车项ID\n// 跳转到订单确认页面\nnavigate('/order',{state:{cartItemIds,selectedItems:selectedCartItems,coupon,pointsUsed,discountAmount,actualAmount:calculateSelectedTotal()-(discountAmount||0)}});};// 计算选中商品的总价\nconst calculateSelectedTotal=()=>{return items.filter(item=>selectedItems.includes(item.product.id)).reduce((total,item)=>total+item.product.price*item.quantity,0);};// 表格列定义\nconst columns=[{title:/*#__PURE__*/_jsx(Checkbox,{checked:selectedItems.length===items.length&&items.length>0,indeterminate:selectedItems.length>0&&selectedItems.length<items.length,onChange:e=>handleSelectAll(e.target.checked),children:\"\\u5168\\u9009\"}),dataIndex:'selection',key:'selection',width:80,render:(_,record)=>/*#__PURE__*/_jsx(Checkbox,{checked:selectedItems.includes(record.product.id),onChange:()=>handleToggleSelection(record.product.id)})},{title:'商品信息',dataIndex:'product',key:'product',width:300,render:product=>/*#__PURE__*/_jsxs(Space,{children:[/*#__PURE__*/_jsx(Image,{width:60,height:60,src:product.imageUrl||'https://via.placeholder.com/60x60?text=暂无图片',alt:product.name,style:{objectFit:'cover'}}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{style:{fontWeight:500,marginBottom:4},children:product.name}),/*#__PURE__*/_jsx(Text,{type:\"secondary\",style:{fontSize:12},children:product.categoryName})]})]})},{title:'单价',dataIndex:'product',key:'price',width:120,render:product=>/*#__PURE__*/_jsxs(Text,{strong:true,style:{color:'#ff4d4f'},children:[\"\\xA5\",product.price]})},{title:'数量',dataIndex:'quantity',key:'quantity',width:120,render:(quantity,record)=>/*#__PURE__*/_jsx(InputNumber,{min:1,max:record.product.stockQuantity,value:quantity,onChange:value=>handleQuantityChange(record.product.id,value||1),style:{width:80}})},{title:'小计',key:'subtotal',width:120,render:(_,record)=>/*#__PURE__*/_jsxs(Text,{strong:true,style:{color:'#ff4d4f'},children:[\"\\xA5\",(record.product.price*record.quantity).toFixed(2)]})},{title:'操作',key:'action',width:100,render:(_,record)=>/*#__PURE__*/_jsx(Button,{type:\"link\",danger:true,icon:/*#__PURE__*/_jsx(DeleteOutlined,{}),onClick:()=>handleRemoveItem(record.product.id),children:\"\\u5220\\u9664\"})}];if(items.length===0){return/*#__PURE__*/_jsxs(\"div\",{style:{padding:'20px'},children:[/*#__PURE__*/_jsx(Title,{level:2,children:\"\\u8D2D\\u7269\\u8F66\"}),/*#__PURE__*/_jsx(Empty,{image:/*#__PURE__*/_jsx(ShoppingOutlined,{style:{fontSize:64,color:'#ccc'}}),description:\"\\u8D2D\\u7269\\u8F66\\u662F\\u7A7A\\u7684\",style:{padding:'60px 0'},children:/*#__PURE__*/_jsx(Button,{type:\"primary\",onClick:()=>navigate('/'),children:\"\\u53BB\\u8D2D\\u7269\"})})]});}return/*#__PURE__*/_jsxs(\"div\",{style:{padding:'20px'},children:[/*#__PURE__*/_jsx(Title,{level:2,children:\"\\u8D2D\\u7269\\u8F66\"}),/*#__PURE__*/_jsx(Card,{style:{marginBottom:20},children:/*#__PURE__*/_jsx(Table,{columns:columns,dataSource:items,rowKey:record=>record.product.id,pagination:false,size:\"middle\"})}),/*#__PURE__*/_jsxs(Row,{gutter:20,children:[/*#__PURE__*/_jsx(Col,{xs:24,md:16,children:/*#__PURE__*/_jsxs(Space,{children:[/*#__PURE__*/_jsx(Button,{onClick:handleClearCart,disabled:items.length===0,children:\"\\u6E05\\u7A7A\\u8D2D\\u7269\\u8F66\"}),/*#__PURE__*/_jsx(Button,{onClick:()=>navigate('/'),children:\"\\u7EE7\\u7EED\\u8D2D\\u7269\"})]})}),/*#__PURE__*/_jsx(Col,{xs:24,md:8,children:/*#__PURE__*/_jsx(Card,{title:\"\\u7ED3\\u7B97\\u4FE1\\u606F\",children:/*#__PURE__*/_jsxs(Space,{direction:\"vertical\",style:{width:'100%'},children:[/*#__PURE__*/_jsxs(Row,{justify:\"space-between\",children:[/*#__PURE__*/_jsx(Text,{children:\"\\u5DF2\\u9009\\u5546\\u54C1\\uFF1A\"}),/*#__PURE__*/_jsxs(Text,{children:[selectedItems.length,\" \\u4EF6\"]})]}),/*#__PURE__*/_jsxs(Row,{justify:\"space-between\",children:[/*#__PURE__*/_jsx(Text,{children:\"\\u5546\\u54C1\\u603B\\u4EF7\\uFF1A\"}),/*#__PURE__*/_jsxs(Text,{strong:true,style:{color:'#ff4d4f'},children:[\"\\xA5\",calculateSelectedTotal().toFixed(2)]})]}),/*#__PURE__*/_jsxs(Row,{align:\"middle\",style:{marginTop:10},children:[/*#__PURE__*/_jsx(Col,{span:8,children:/*#__PURE__*/_jsx(Text,{children:\"\\u4F18\\u60E0\\u5238\\uFF1A\"})}),/*#__PURE__*/_jsx(Col,{span:16,children:/*#__PURE__*/_jsx(Select,{style:{width:'100%'},placeholder:\"\\u8BF7\\u9009\\u62E9\\u4F18\\u60E0\\u5238\",value:(coupon===null||coupon===void 0?void 0:coupon.id)||null,onChange:handleCouponChange,allowClear:true,children:availableCoupons.map(c=>/*#__PURE__*/_jsxs(Option,{value:c.id,children:[c.name,\" (\",c.description,\")\"]},c.id))})})]}),/*#__PURE__*/_jsxs(Row,{align:\"middle\",style:{marginTop:10},children:[/*#__PURE__*/_jsx(Col,{span:8,children:/*#__PURE__*/_jsxs(Space,{children:[/*#__PURE__*/_jsx(Text,{children:\"\\u79EF\\u5206\\u62B5\\u6263\\uFF1A\"}),/*#__PURE__*/_jsx(Tooltip,{title:\"100\\u79EF\\u5206=1\\u5143\",children:/*#__PURE__*/_jsx(QuestionCircleOutlined,{})})]})}),/*#__PURE__*/_jsxs(Col,{span:16,children:[/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsx(Col,{span:16,children:/*#__PURE__*/_jsx(Slider,{min:0,max:userPoints,step:100,value:pointsUsed,onChange:handlePointsChange})}),/*#__PURE__*/_jsx(Col,{span:8,children:/*#__PURE__*/_jsx(InputNumber,{min:0,max:userPoints,step:100,value:pointsUsed,onChange:handlePointsChange,style:{marginLeft:16,width:'100%'}})})]}),/*#__PURE__*/_jsxs(Text,{type:\"secondary\",style:{fontSize:12},children:[\"\\u60A8\\u6709 \",userPoints,\" \\u79EF\\u5206\\u53EF\\u7528\\uFF0C\\u5F53\\u524D\\u4F7F\\u7528 \",pointsUsed,\" \\u79EF\\u5206\\uFF0C\\u62B5\\u6263 \\xA5\",(pointsUsed/100).toFixed(2)]})]})]}),discountAmount>0&&/*#__PURE__*/_jsxs(Row,{justify:\"space-between\",style:{marginTop:10},children:[/*#__PURE__*/_jsx(Text,{children:\"\\u4F18\\u60E0\\u91D1\\u989D\\uFF1A\"}),/*#__PURE__*/_jsxs(Text,{style:{color:'#52c41a'},children:[\"-\\xA5\",discountAmount.toFixed(2)]})]}),/*#__PURE__*/_jsx(Divider,{style:{margin:'12px 0'}}),/*#__PURE__*/_jsxs(Row,{justify:\"space-between\",children:[/*#__PURE__*/_jsx(Text,{strong:true,children:\"\\u5E94\\u4ED8\\u603B\\u989D\\uFF1A\"}),/*#__PURE__*/_jsxs(Text,{strong:true,style:{color:'#ff4d4f',fontSize:18},children:[\"\\xA5\",(calculateSelectedTotal()-(discountAmount||0)).toFixed(2)]})]}),/*#__PURE__*/_jsxs(Button,{type:\"primary\",size:\"large\",block:true,onClick:handleCheckout,disabled:selectedItems.length===0,children:[\"\\u7ED3\\u7B97 (\",selectedItems.length,\")\"]})]})})})]})]});};export default CartPage;","map":{"version":3,"names":["React","useState","useEffect","Card","Table","InputNumber","Button","Space","Typography","Image","Empty","Checkbox","Row","Col","Divider","message","Select","Tooltip","Slider","DeleteOutlined","ShoppingOutlined","QuestionCircleOutlined","useDispatch","useSelector","useNavigate","updateQuantity","removeFromCart","clearCart","applyCoupon","applyPoints","CartService","jsx","_jsx","jsxs","_jsxs","Title","Text","Option","mockCoupons","id","name","description","type","value","minAmount","startDate","endDate","status","MOCK_USER_ID","CartPage","navigate","dispatch","items","totalAmount","coupon","pointsUsed","discountAmount","actualAmount","state","cart","selectedItems","setSelectedItems","userPoints","setUserPoints","availableCoupons","setAvailableCoupons","loading","setLoading","fetchCartItems","error","console","filtered","filter","c","handleQuantityChange","productId","quantity","cartItemId","updateCartItemQuantity","handleRemoveItem","removeFromCartByProductId","success","handleClearCart","handleToggleSelection","prev","includes","handleSelectAll","checked","map","item","product","handleCouponChange","couponId","selectedCoupon","find","handlePointsChange","pointsValue","limitedValue","Math","min","maxPointsAllowed","floor","finalValue","handleCheckout","selectedCartItems","length","warning","cartItemIds","calculateSelectedTotal","reduce","total","price","columns","title","indeterminate","onChange","e","target","children","dataIndex","key","width","render","_","record","height","src","imageUrl","alt","style","objectFit","fontWeight","marginBottom","fontSize","categoryName","strong","color","max","stockQuantity","toFixed","danger","icon","onClick","padding","level","image","dataSource","rowKey","pagination","size","gutter","xs","md","disabled","direction","justify","align","marginTop","span","placeholder","allowClear","step","marginLeft","margin","block"],"sources":["D:/luckymall/frontend/src/pages/CartPage.tsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { \n  Card, \n  Table, \n  InputNumber, \n  Button, \n  Space, \n  Typography, \n  Image, \n  Empty,\n  Checkbox,\n  Row,\n  Col,\n  Divider,\n  message,\n  Select,\n  Tooltip,\n  Slider,\n  InputProps\n} from 'antd';\nimport { DeleteOutlined, ShoppingOutlined, QuestionCircleOutlined } from '@ant-design/icons';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { useNavigate } from 'react-router-dom';\nimport { RootState, AppDispatch } from '../store';\nimport { \n  updateQuantity, \n  removeFromCart, \n  clearCart,\n  applyCoupon,\n  applyPoints\n} from '../store/slices/cartSlice';\nimport { CartService } from '../services/cartService';\nimport { Coupon } from '../types';\n\nconst { Title, Text } = Typography;\nconst { Option } = Select;\n\n// 模拟优惠券数据\nconst mockCoupons: Coupon[] = [\n  {\n    id: 1,\n    name: '满100减10',\n    description: '订单满100元减10元',\n    type: 'FIXED',\n    value: 10,\n    minAmount: 100,\n    startDate: '2023-01-01',\n    endDate: '2025-12-31',\n    status: 1\n  },\n  {\n    id: 2,\n    name: '满200减25',\n    description: '订单满200元减25元',\n    type: 'FIXED',\n    value: 25,\n    minAmount: 200,\n    startDate: '2023-01-01',\n    endDate: '2025-12-31',\n    status: 1\n  },\n  {\n    id: 3,\n    name: '8折优惠',\n    description: '订单满300元享8折优惠',\n    type: 'DISCOUNT',\n    value: 8,\n    minAmount: 300,\n    startDate: '2023-01-01',\n    endDate: '2025-12-31',\n    status: 1\n  }\n];\n\n// 模拟用户ID\nconst MOCK_USER_ID = 1;\n\nconst CartPage: React.FC = () => {\n  const navigate = useNavigate();\n  const dispatch = useDispatch<AppDispatch>();\n  \n  const { items, totalAmount, coupon, pointsUsed, discountAmount, actualAmount } = useSelector(\n    (state: RootState) => state.cart\n  );\n  \n  // 本地状态管理选中的商品\n  const [selectedItems, setSelectedItems] = useState<number[]>([]);\n  \n  // 模拟用户积分\n  const [userPoints, setUserPoints] = useState<number>(1000);\n  \n  // 可用的优惠券列表\n  const [availableCoupons, setAvailableCoupons] = useState<Coupon[]>([]);\n  \n  // 加载状态\n  const [loading, setLoading] = useState<boolean>(false);\n  \n  // 加载购物车数据\n  useEffect(() => {\n    const fetchCartItems = async () => {\n      try {\n        setLoading(true);\n        // 这里可以从后端加载购物车数据\n        // const cartItems = await CartService.getCartItems(MOCK_USER_ID);\n        // 这里可以将后端数据同步到Redux状态\n      } catch (error) {\n        console.error('获取购物车数据失败:', error);\n        message.error('获取购物车数据失败');\n      } finally {\n        setLoading(false);\n      }\n    };\n    \n    fetchCartItems();\n  }, []);\n  \n  // 根据购物车金额筛选可用优惠券\n  useEffect(() => {\n    const filtered = mockCoupons.filter(c => c.minAmount <= totalAmount);\n    setAvailableCoupons(filtered);\n    \n    // 如果当前选择的优惠券不再适用，则清除\n    if (coupon && coupon.minAmount > totalAmount) {\n      dispatch(applyCoupon(null));\n    }\n  }, [totalAmount, coupon, dispatch]);\n  \n  // 处理数量变化\n  const handleQuantityChange = async (productId: number, quantity: number) => {\n    if (quantity > 0) {\n      try {\n        // 先更新本地Redux状态\n        dispatch(updateQuantity({ productId, quantity }));\n        \n        // 然后同步到后端\n        // 注意：这里需要获取购物车项ID，这里简化处理\n        const cartItemId = productId; // 实际应用中需要从购物车项中获取真实ID\n        await CartService.updateCartItemQuantity(MOCK_USER_ID, cartItemId, quantity);\n      } catch (error) {\n        console.error('更新购物车数量失败:', error);\n        message.error('更新购物车数量失败');\n      }\n    }\n  };\n  \n  // 删除商品\n  const handleRemoveItem = async (productId: number) => {\n    try {\n      // 先更新本地Redux状态\n      dispatch(removeFromCart(productId));\n      \n      // 然后同步到后端\n      await CartService.removeFromCartByProductId(MOCK_USER_ID, productId);\n      message.success('商品已从购物车中移除');\n    } catch (error) {\n      console.error('从购物车移除商品失败:', error);\n      message.error('从购物车移除商品失败');\n    }\n  };\n  \n  // 清空购物车\n  const handleClearCart = async () => {\n    try {\n      // 先更新本地Redux状态\n      dispatch(clearCart());\n      \n      // 然后同步到后端\n      await CartService.clearCart(MOCK_USER_ID);\n      message.success('购物车已清空');\n    } catch (error) {\n      console.error('清空购物车失败:', error);\n      message.error('清空购物车失败');\n    }\n  };\n  \n  // 切换商品选择状态\n  const handleToggleSelection = (productId: number) => {\n    setSelectedItems(prev => \n      prev.includes(productId) \n        ? prev.filter(id => id !== productId)\n        : [...prev, productId]\n    );\n  };\n  \n  // 全选/取消全选\n  const handleSelectAll = (checked: boolean) => {\n    if (checked) {\n      setSelectedItems(items.map(item => item.product.id));\n    } else {\n      setSelectedItems([]);\n    }\n  };\n  \n  // 选择优惠券\n  const handleCouponChange = (couponId: number | null) => {\n    if (couponId === null) {\n      dispatch(applyCoupon(null));\n    } else {\n      const selectedCoupon = mockCoupons.find(c => c.id === couponId);\n      if (selectedCoupon) {\n        dispatch(applyCoupon(selectedCoupon));\n      }\n    }\n  };\n  \n  // 使用积分\n  const handlePointsChange = (value: number | null) => {\n    // 限制使用的积分不超过用户拥有的积分\n    const pointsValue = value || 0;\n    const limitedValue = Math.min(pointsValue, userPoints);\n    // 限制使用的积分不超过订单金额的一半（按100积分=1元计算）\n    const maxPointsAllowed = Math.floor(totalAmount * 50);\n    const finalValue = Math.min(limitedValue, maxPointsAllowed);\n    \n    // 更新Redux状态\n    dispatch(applyPoints(finalValue));\n    \n    // 这里可以调用后端API保存积分使用情况，但目前后端可能没有对应接口\n    // 所以这部分暂时不实现\n  };\n  \n  // 结算\n  const handleCheckout = () => {\n    const selectedCartItems = items.filter(item => \n      selectedItems.includes(item.product.id)\n    );\n    \n    if (selectedCartItems.length === 0) {\n      message.warning('请选择要结算的商品');\n      return;\n    }\n    \n    // 获取选中商品的购物车项ID，用于创建订单\n    const cartItemIds = selectedCartItems.map(item => item.product.id); // 实际应用中应该使用真实的购物车项ID\n    \n    // 跳转到订单确认页面\n    navigate('/order', { \n      state: { \n        cartItemIds,\n        selectedItems: selectedCartItems,\n        coupon,\n        pointsUsed,\n        discountAmount,\n        actualAmount: calculateSelectedTotal() - (discountAmount || 0)\n      } \n    });\n  };\n  \n  // 计算选中商品的总价\n  const calculateSelectedTotal = () => {\n    return items\n      .filter(item => selectedItems.includes(item.product.id))\n      .reduce((total, item) => total + item.product.price * item.quantity, 0);\n  };\n  \n  // 表格列定义\n  const columns = [\n    {\n      title: (\n        <Checkbox\n          checked={selectedItems.length === items.length && items.length > 0}\n          indeterminate={selectedItems.length > 0 && selectedItems.length < items.length}\n          onChange={(e) => handleSelectAll(e.target.checked)}\n        >\n          全选\n        </Checkbox>\n      ),\n      dataIndex: 'selection',\n      key: 'selection',\n      width: 80,\n      render: (_: any, record: any) => (\n        <Checkbox\n          checked={selectedItems.includes(record.product.id)}\n          onChange={() => handleToggleSelection(record.product.id)}\n        />\n      ),\n    },\n    {\n      title: '商品信息',\n      dataIndex: 'product',\n      key: 'product',\n      width: 300,\n      render: (product: any) => (\n        <Space>\n          <Image\n            width={60}\n            height={60}\n            src={product.imageUrl || 'https://via.placeholder.com/60x60?text=暂无图片'}\n            alt={product.name}\n            style={{ objectFit: 'cover' }}\n          />\n          <div>\n            <div style={{ fontWeight: 500, marginBottom: 4 }}>\n              {product.name}\n            </div>\n            <Text type=\"secondary\" style={{ fontSize: 12 }}>\n              {product.categoryName}\n            </Text>\n          </div>\n        </Space>\n      ),\n    },\n    {\n      title: '单价',\n      dataIndex: 'product',\n      key: 'price',\n      width: 120,\n      render: (product: any) => (\n        <Text strong style={{ color: '#ff4d4f' }}>\n          ¥{product.price}\n        </Text>\n      ),\n    },\n    {\n      title: '数量',\n      dataIndex: 'quantity',\n      key: 'quantity',\n      width: 120,\n      render: (quantity: number, record: any) => (\n        <InputNumber\n          min={1}\n          max={record.product.stockQuantity}\n          value={quantity}\n          onChange={(value) => handleQuantityChange(record.product.id, value || 1)}\n          style={{ width: 80 }}\n        />\n      ),\n    },\n    {\n      title: '小计',\n      key: 'subtotal',\n      width: 120,\n      render: (_: any, record: any) => (\n        <Text strong style={{ color: '#ff4d4f' }}>\n          ¥{(record.product.price * record.quantity).toFixed(2)}\n        </Text>\n      ),\n    },\n    {\n      title: '操作',\n      key: 'action',\n      width: 100,\n      render: (_: any, record: any) => (\n        <Button\n          type=\"link\"\n          danger\n          icon={<DeleteOutlined />}\n          onClick={() => handleRemoveItem(record.product.id)}\n        >\n          删除\n        </Button>\n      ),\n    },\n  ];\n  \n  if (items.length === 0) {\n    return (\n      <div style={{ padding: '20px' }}>\n        <Title level={2}>购物车</Title>\n        <Empty\n          image={<ShoppingOutlined style={{ fontSize: 64, color: '#ccc' }} />}\n          description=\"购物车是空的\"\n          style={{ padding: '60px 0' }}\n        >\n          <Button type=\"primary\" onClick={() => navigate('/')}>\n            去购物\n          </Button>\n        </Empty>\n      </div>\n    );\n  }\n  \n  return (\n    <div style={{ padding: '20px' }}>\n      <Title level={2}>购物车</Title>\n      \n      <Card style={{ marginBottom: 20 }}>\n        <Table\n          columns={columns}\n          dataSource={items}\n          rowKey={(record) => record.product.id}\n          pagination={false}\n          size=\"middle\"\n        />\n      </Card>\n      \n      <Row gutter={20}>\n        <Col xs={24} md={16}>\n          <Space>\n            <Button onClick={handleClearCart} disabled={items.length === 0}>\n              清空购物车\n            </Button>\n            <Button onClick={() => navigate('/')}>\n              继续购物\n            </Button>\n          </Space>\n        </Col>\n        \n        <Col xs={24} md={8}>\n          <Card title=\"结算信息\">\n            <Space direction=\"vertical\" style={{ width: '100%' }}>\n              <Row justify=\"space-between\">\n                <Text>已选商品：</Text>\n                <Text>{selectedItems.length} 件</Text>\n              </Row>\n              \n              <Row justify=\"space-between\">\n                <Text>商品总价：</Text>\n                <Text strong style={{ color: '#ff4d4f' }}>\n                  ¥{calculateSelectedTotal().toFixed(2)}\n                </Text>\n              </Row>\n              \n              {/* 优惠券选择 */}\n              <Row align=\"middle\" style={{ marginTop: 10 }}>\n                <Col span={8}>\n                  <Text>优惠券：</Text>\n                </Col>\n                <Col span={16}>\n                  <Select\n                    style={{ width: '100%' }}\n                    placeholder=\"请选择优惠券\"\n                    value={coupon?.id || null}\n                    onChange={handleCouponChange}\n                    allowClear\n                  >\n                    {availableCoupons.map(c => (\n                      <Option key={c.id} value={c.id}>\n                        {c.name} ({c.description})\n                      </Option>\n                    ))}\n                  </Select>\n                </Col>\n              </Row>\n              \n              {/* 积分抵扣 */}\n              <Row align=\"middle\" style={{ marginTop: 10 }}>\n                <Col span={8}>\n                  <Space>\n                    <Text>积分抵扣：</Text>\n                    <Tooltip title=\"100积分=1元\">\n                      <QuestionCircleOutlined />\n                    </Tooltip>\n                  </Space>\n                </Col>\n                <Col span={16}>\n                  <Row>\n                    <Col span={16}>\n                      <Slider\n                        min={0}\n                        max={userPoints}\n                        step={100}\n                        value={pointsUsed}\n                        onChange={handlePointsChange}\n                      />\n                    </Col>\n                    <Col span={8}>\n                      <InputNumber\n                        min={0}\n                        max={userPoints}\n                        step={100}\n                        value={pointsUsed}\n                        onChange={handlePointsChange}\n                        style={{ marginLeft: 16, width: '100%' }}\n                      />\n                    </Col>\n                  </Row>\n                  <Text type=\"secondary\" style={{ fontSize: 12 }}>\n                    您有 {userPoints} 积分可用，当前使用 {pointsUsed} 积分，抵扣 ¥{(pointsUsed / 100).toFixed(2)}\n                  </Text>\n                </Col>\n              </Row>\n              \n              {/* 优惠金额 */}\n              {discountAmount > 0 && (\n                <Row justify=\"space-between\" style={{ marginTop: 10 }}>\n                  <Text>优惠金额：</Text>\n                  <Text style={{ color: '#52c41a' }}>\n                    -¥{discountAmount.toFixed(2)}\n                  </Text>\n                </Row>\n              )}\n              \n              <Divider style={{ margin: '12px 0' }} />\n              \n              {/* 应付总额 */}\n              <Row justify=\"space-between\">\n                <Text strong>应付总额：</Text>\n                <Text strong style={{ color: '#ff4d4f', fontSize: 18 }}>\n                  ¥{(calculateSelectedTotal() - (discountAmount || 0)).toFixed(2)}\n                </Text>\n              </Row>\n              \n              <Button \n                type=\"primary\" \n                size=\"large\" \n                block\n                onClick={handleCheckout}\n                disabled={selectedItems.length === 0}\n              >\n                结算 ({selectedItems.length})\n              </Button>\n            </Space>\n          </Card>\n        </Col>\n      </Row>\n    </div>\n  );\n};\n\nexport default CartPage; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
{"ast":null,"code":"import React,{useState}from'react';import{Input,Button}from'antd';import{SearchOutlined}from'@ant-design/icons';import{useDispatch}from'react-redux';import{useNavigate}from'react-router-dom';import{searchProducts}from'../store/slices/productSlice';import{jsx as _jsx}from\"react/jsx-runtime\";const{Search}=Input;const SearchBar=_ref=>{let{placeholder=\"搜索商品...\",size='middle',style,onSearch}=_ref;const[keyword,setKeyword]=useState('');const dispatch=useDispatch();const navigate=useNavigate();const handleSearch=value=>{const searchKeyword=value.trim();if(searchKeyword){// 执行搜索\ndispatch(searchProducts({keyword:searchKeyword,current:1,size:12}));// 跳转到搜索结果页面\nnavigate(`/search?keyword=${encodeURIComponent(searchKeyword)}`);// 如果有自定义搜索回调，也执行它\nif(onSearch){onSearch(searchKeyword);}}};return/*#__PURE__*/_jsx(Search,{placeholder:placeholder,size:size,style:style,value:keyword,onChange:e=>setKeyword(e.target.value),onSearch:handleSearch,enterButton:/*#__PURE__*/_jsx(Button,{type:\"primary\",icon:/*#__PURE__*/_jsx(SearchOutlined,{}),children:\"\\u641C\\u7D22\"}),allowClear:true});};export default SearchBar;","map":{"version":3,"names":["React","useState","Input","Button","SearchOutlined","useDispatch","useNavigate","searchProducts","jsx","_jsx","Search","SearchBar","_ref","placeholder","size","style","onSearch","keyword","setKeyword","dispatch","navigate","handleSearch","value","searchKeyword","trim","current","encodeURIComponent","onChange","e","target","enterButton","type","icon","children","allowClear"],"sources":["D:/luckymall/frontend/src/components/SearchBar.tsx"],"sourcesContent":["import React, { useState } from 'react';\r\nimport { Input, Button, Space } from 'antd';\r\nimport { SearchOutlined } from '@ant-design/icons';\r\nimport { useDispatch } from 'react-redux';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport { AppDispatch } from '../store';\r\nimport { searchProducts } from '../store/slices/productSlice';\r\n\r\nconst { Search } = Input;\r\n\r\ninterface SearchBarProps {\r\n  placeholder?: string;\r\n  size?: 'small' | 'middle' | 'large';\r\n  style?: React.CSSProperties;\r\n  onSearch?: (keyword: string) => void;\r\n}\r\n\r\nconst SearchBar: React.FC<SearchBarProps> = ({\r\n  placeholder = \"搜索商品...\",\r\n  size = 'middle',\r\n  style,\r\n  onSearch\r\n}) => {\r\n  const [keyword, setKeyword] = useState('');\r\n  const dispatch = useDispatch<AppDispatch>();\r\n  const navigate = useNavigate();\r\n  \r\n  const handleSearch = (value: string) => {\r\n    const searchKeyword = value.trim();\r\n    if (searchKeyword) {\r\n      // 执行搜索\r\n      dispatch(searchProducts({ \r\n        keyword: searchKeyword,\r\n        current: 1,\r\n        size: 12 \r\n      }));\r\n      \r\n      // 跳转到搜索结果页面\r\n      navigate(`/search?keyword=${encodeURIComponent(searchKeyword)}`);\r\n      \r\n      // 如果有自定义搜索回调，也执行它\r\n      if (onSearch) {\r\n        onSearch(searchKeyword);\r\n      }\r\n    }\r\n  };\r\n  \r\n  return (\r\n    <Search\r\n      placeholder={placeholder}\r\n      size={size}\r\n      style={style}\r\n      value={keyword}\r\n      onChange={(e) => setKeyword(e.target.value)}\r\n      onSearch={handleSearch}\r\n      enterButton={\r\n        <Button type=\"primary\" icon={<SearchOutlined />}>\r\n          搜索\r\n        </Button>\r\n      }\r\n      allowClear\r\n    />\r\n  );\r\n};\r\n\r\nexport default SearchBar; "],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,KAAQ,OAAO,CACvC,OAASC,KAAK,CAAEC,MAAM,KAAe,MAAM,CAC3C,OAASC,cAAc,KAAQ,mBAAmB,CAClD,OAASC,WAAW,KAAQ,aAAa,CACzC,OAASC,WAAW,KAAQ,kBAAkB,CAE9C,OAASC,cAAc,KAAQ,8BAA8B,CAAC,OAAAC,GAAA,IAAAC,IAAA,yBAE9D,KAAM,CAAEC,MAAO,CAAC,CAAGR,KAAK,CASxB,KAAM,CAAAS,SAAmC,CAAGC,IAAA,EAKtC,IALuC,CAC3CC,WAAW,CAAG,SAAS,CACvBC,IAAI,CAAG,QAAQ,CACfC,KAAK,CACLC,QACF,CAAC,CAAAJ,IAAA,CACC,KAAM,CAACK,OAAO,CAAEC,UAAU,CAAC,CAAGjB,QAAQ,CAAC,EAAE,CAAC,CAC1C,KAAM,CAAAkB,QAAQ,CAAGd,WAAW,CAAc,CAAC,CAC3C,KAAM,CAAAe,QAAQ,CAAGd,WAAW,CAAC,CAAC,CAE9B,KAAM,CAAAe,YAAY,CAAIC,KAAa,EAAK,CACtC,KAAM,CAAAC,aAAa,CAAGD,KAAK,CAACE,IAAI,CAAC,CAAC,CAClC,GAAID,aAAa,CAAE,CACjB;AACAJ,QAAQ,CAACZ,cAAc,CAAC,CACtBU,OAAO,CAAEM,aAAa,CACtBE,OAAO,CAAE,CAAC,CACVX,IAAI,CAAE,EACR,CAAC,CAAC,CAAC,CAEH;AACAM,QAAQ,CAAC,mBAAmBM,kBAAkB,CAACH,aAAa,CAAC,EAAE,CAAC,CAEhE;AACA,GAAIP,QAAQ,CAAE,CACZA,QAAQ,CAACO,aAAa,CAAC,CACzB,CACF,CACF,CAAC,CAED,mBACEd,IAAA,CAACC,MAAM,EACLG,WAAW,CAAEA,WAAY,CACzBC,IAAI,CAAEA,IAAK,CACXC,KAAK,CAAEA,KAAM,CACbO,KAAK,CAAEL,OAAQ,CACfU,QAAQ,CAAGC,CAAC,EAAKV,UAAU,CAACU,CAAC,CAACC,MAAM,CAACP,KAAK,CAAE,CAC5CN,QAAQ,CAAEK,YAAa,CACvBS,WAAW,cACTrB,IAAA,CAACN,MAAM,EAAC4B,IAAI,CAAC,SAAS,CAACC,IAAI,cAAEvB,IAAA,CAACL,cAAc,GAAE,CAAE,CAAA6B,QAAA,CAAC,cAEjD,CAAQ,CACT,CACDC,UAAU,MACX,CAAC,CAEN,CAAC,CAED,cAAe,CAAAvB,SAAS","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
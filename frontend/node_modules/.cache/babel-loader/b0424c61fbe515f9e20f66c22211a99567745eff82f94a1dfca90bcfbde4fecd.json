{"ast":null,"code":"import React,{useEffect,useState}from'react';import{Card,Row,Col,Pagination,Spin,Alert,Select,Button,Space,Typography,Image,Tag,Empty,Drawer,Checkbox,Radio,Divider,Rate,Badge,Tooltip,InputNumber}from'antd';import{FilterOutlined,ShoppingCartOutlined,EyeOutlined,HeartOutlined}from'@ant-design/icons';import{useDispatch,useSelector}from'react-redux';import{useSearchParams,useNavigate}from'react-router-dom';import{searchProducts,resetSearch}from'../store/slices/productSlice';import{fetchAllCategories}from'../store/slices/categorySlice';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const{Title,Text,Paragraph}=Typography;const{Option}=Select;const{Group:CheckboxGroup}=Checkbox;// 价格区间选项\nconst PRICE_RANGES=[{label:'0-100元',value:[0,100]},{label:'100-500元',value:[100,500]},{label:'500-1000元',value:[500,1000]},{label:'1000-5000元',value:[1000,5000]},{label:'5000元以上',value:[5000,999999]}];// 扩展ProductSearchParams类型\nconst SearchResults=()=>{var _allCategories$find;const[searchParams,setSearchParams]=useSearchParams();const navigate=useNavigate();const dispatch=useDispatch();const{searchResults,searchTotal,searchCurrent,searchLoading,searchError,lastSearchKeyword}=useSelector(state=>state.products);const{allCategories}=useSelector(state=>state.categories);const[filterDrawerVisible,setFilterDrawerVisible]=useState(false);const[selectedCategories,setSelectedCategories]=useState([]);const[priceRange,setPriceRange]=useState(null);const[customPriceRange,setCustomPriceRange]=useState([null,null]);const[selectedRating,setSelectedRating]=useState(null);const[sortBy,setSortBy]=useState('relevance');// 获取URL参数\nconst keyword=searchParams.get('keyword')||'';const categoryId=searchParams.get('category');const minPrice=searchParams.get('minPrice');const maxPrice=searchParams.get('maxPrice');const rating=searchParams.get('rating');const sort=searchParams.get('sort');// 初始化筛选条件\nuseEffect(()=>{if(categoryId){setSelectedCategories([parseInt(categoryId)]);}if(minPrice&&maxPrice){setPriceRange([parseInt(minPrice),parseInt(maxPrice)]);setCustomPriceRange([parseInt(minPrice),parseInt(maxPrice)]);}if(rating){setSelectedRating(parseInt(rating));}if(sort){setSortBy(sort);}},[categoryId,minPrice,maxPrice,rating,sort]);// 更新URL参数\nconst updateSearchParams=React.useCallback(params=>{const newParams=new URLSearchParams();// 保留关键词\nnewParams.set('keyword',keyword);// 添加分类\nif(params.categoryId){newParams.set('category',params.categoryId.toString());}// 添加价格\nif(params.minPrice){newParams.set('minPrice',params.minPrice.toString());}if(params.maxPrice){newParams.set('maxPrice',params.maxPrice.toString());}// 添加评分\nif(params.minRating){newParams.set('rating',params.minRating.toString());}// 添加排序\nif(params.sortBy){newParams.set('sort',params.sortBy);}// 更新URL，不刷新页面\nsetSearchParams(newParams);},[keyword,setSearchParams]);// 执行搜索，带上所有筛选条件\nconst executeSearch=React.useCallback(()=>{if(!keyword)return;// 如果没有关键词，不执行搜索\nconst params={keyword,current:searchCurrent,size:12};// 添加分类筛选\nif(selectedCategories.length===1){params.categoryId=selectedCategories[0];}// 添加价格筛选\nif(priceRange){params.minPrice=priceRange[0];params.maxPrice=priceRange[1];}// 添加评分筛选\nif(selectedRating!==null){params.minRating=selectedRating;}// 添加排序\nif(sortBy&&sortBy!=='relevance'){params.sortBy=sortBy;}// 执行搜索\ndispatch(searchProducts(params));// 更新URL参数\nupdateSearchParams(params);},[keyword,searchCurrent,selectedCategories,priceRange,selectedRating,sortBy,dispatch,updateSearchParams]);useEffect(()=>{if(keyword&&keyword!==lastSearchKeyword){// 获取所有分类\ndispatch(fetchAllCategories());// 执行搜索，带上筛选参数\nexecuteSearch();}// 组件卸载时重置搜索结果\nreturn()=>{dispatch(resetSearch());};},[dispatch,keyword,lastSearchKeyword,executeSearch]);// 处理分页变化\nconst handlePageChange=(page,pageSize)=>{// 更新当前页码和每页数量\nconst currentSize=pageSize||12;// 使用executeSearch函数而不是直接调用API\nsetTimeout(()=>{executeSearch();},0);};// 处理排序变化\nconst handleSortChange=value=>{setSortBy(value);// 使用executeSearch函数而不是直接调用API\nsetTimeout(()=>{executeSearch();},0);};// 处理分类选择\nconst handleCategoryChange=values=>{setSelectedCategories(values);};// 处理价格区间选择\nconst handlePriceRangeChange=range=>{setPriceRange(range);setCustomPriceRange([range[0],range[1]]);};// 处理自定义价格区间\nconst handleCustomPriceChange=(index,value)=>{const newRange=[...customPriceRange];newRange[index]=value;setCustomPriceRange(newRange);if(newRange[0]!==null&&newRange[1]!==null){setPriceRange([newRange[0],newRange[1]]);}};// 处理评分选择\nconst handleRatingChange=value=>{setSelectedRating(value===selectedRating?null:value);};// 应用筛选条件\nconst applyFilters=()=>{setFilterDrawerVisible(false);// 使用setTimeout避免在渲染周期中直接调用状态更新\nsetTimeout(()=>{executeSearch();},0);};// 清除所有筛选条件\nconst clearAllFilters=()=>{setSelectedCategories([]);setPriceRange(null);setCustomPriceRange([null,null]);setSelectedRating(null);// 使用setTimeout避免在渲染周期中直接调用状态更新\nsetTimeout(()=>{executeSearch();},0);// 更新URL参数也放在setTimeout中\nsetTimeout(()=>{const newParams=new URLSearchParams();newParams.set('keyword',keyword);if(sortBy!=='relevance'){newParams.set('sort',sortBy);}setSearchParams(newParams);},0);};// 跳转到商品详情页\nconst handleProductClick=productId=>{navigate(`/product/${productId}`);};// 渲染商品卡片\nconst renderProductCard=product=>/*#__PURE__*/_jsx(Col,{xs:24,sm:12,md:8,lg:6,children:/*#__PURE__*/_jsx(Badge.Ribbon,{text:product.salesCount>100?\"热销\":\"\",color:\"red\",style:{display:product.salesCount>100?'block':'none'},children:/*#__PURE__*/_jsx(Card,{hoverable:true,style:{marginBottom:16},cover:/*#__PURE__*/_jsxs(\"div\",{style:{position:'relative'},children:[/*#__PURE__*/_jsx(Image,{alt:product.name,src:product.imageUrl||'https://via.placeholder.com/300x300?text=暂无图片',height:200,style:{objectFit:'cover'},preview:false,onClick:()=>handleProductClick(product.id)}),/*#__PURE__*/_jsx(\"div\",{style:{position:'absolute',top:8,right:8,background:'rgba(255,255,255,0.8)',borderRadius:'50%',width:32,height:32,display:'flex',alignItems:'center',justifyContent:'center',cursor:'pointer'},children:/*#__PURE__*/_jsx(EyeOutlined,{style:{fontSize:18}})})]}),onClick:()=>handleProductClick(product.id),actions:[/*#__PURE__*/_jsx(Tooltip,{title:\"\\u67E5\\u770B\\u8BE6\\u60C5\",children:/*#__PURE__*/_jsx(Button,{type:\"text\",icon:/*#__PURE__*/_jsx(EyeOutlined,{}),onClick:e=>{e.stopPropagation();handleProductClick(product.id);}})}),/*#__PURE__*/_jsx(Tooltip,{title:\"\\u52A0\\u5165\\u8D2D\\u7269\\u8F66\",children:/*#__PURE__*/_jsx(Button,{type:\"text\",icon:/*#__PURE__*/_jsx(ShoppingCartOutlined,{}),onClick:e=>e.stopPropagation()})}),/*#__PURE__*/_jsx(Tooltip,{title:\"\\u6536\\u85CF\",children:/*#__PURE__*/_jsx(Button,{type:\"text\",icon:/*#__PURE__*/_jsx(HeartOutlined,{}),onClick:e=>e.stopPropagation()})})],children:/*#__PURE__*/_jsx(Card.Meta,{title:/*#__PURE__*/_jsx(\"div\",{style:{height:44,overflow:'hidden'},children:/*#__PURE__*/_jsx(Text,{ellipsis:{tooltip:product.name},children:highlightKeyword(product.name,keyword)})}),description:/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{style:{marginBottom:8},children:/*#__PURE__*/_jsxs(Text,{strong:true,style:{color:'#ff4d4f',fontSize:18},children:[\"\\xA5\",product.price]})}),/*#__PURE__*/_jsxs(\"div\",{style:{marginBottom:4,display:'flex',alignItems:'center'},children:[/*#__PURE__*/_jsx(Rate,{allowHalf:true,defaultValue:product.rating||5,disabled:true,style:{fontSize:12}}),/*#__PURE__*/_jsxs(Text,{type:\"secondary\",style:{marginLeft:8},children:[\"(\",product.reviewCount||0,\")\"]})]}),/*#__PURE__*/_jsx(\"div\",{style:{marginBottom:4},children:/*#__PURE__*/_jsxs(Text,{type:\"secondary\",children:[\"\\u9500\\u91CF: \",product.salesCount]})}),product.categoryName&&/*#__PURE__*/_jsx(Tag,{color:\"blue\",children:product.categoryName})]})})})})},product.id);// 高亮关键词函数\nconst highlightKeyword=(text,keyword)=>{if(!keyword)return text;const regex=new RegExp(`(${keyword})`,'gi');const parts=text.split(regex);return parts.map((part,index)=>regex.test(part)?/*#__PURE__*/_jsx(\"span\",{style:{backgroundColor:'#fff566'},children:part},index):part);};// 渲染筛选抽屉\nconst renderFilterDrawer=()=>/*#__PURE__*/_jsxs(Drawer,{title:\"\\u7B5B\\u9009\\u6761\\u4EF6\",placement:\"right\",width:300,onClose:()=>setFilterDrawerVisible(false),open:filterDrawerVisible,footer:/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',justifyContent:'space-between'},children:[/*#__PURE__*/_jsx(Button,{onClick:clearAllFilters,children:\"\\u6E05\\u9664\\u7B5B\\u9009\"}),/*#__PURE__*/_jsx(Button,{type:\"primary\",onClick:applyFilters,children:\"\\u5E94\\u7528\\u7B5B\\u9009\"})]}),children:[/*#__PURE__*/_jsxs(\"div\",{style:{marginBottom:24},children:[/*#__PURE__*/_jsx(Title,{level:5,children:\"\\u5546\\u54C1\\u5206\\u7C7B\"}),/*#__PURE__*/_jsx(CheckboxGroup,{value:selectedCategories,onChange:values=>handleCategoryChange(values),children:/*#__PURE__*/_jsx(Space,{direction:\"vertical\",children:allCategories.map(category=>/*#__PURE__*/_jsx(Checkbox,{value:category.id,children:category.name},category.id))})})]}),/*#__PURE__*/_jsx(Divider,{}),/*#__PURE__*/_jsxs(\"div\",{style:{marginBottom:24},children:[/*#__PURE__*/_jsx(Title,{level:5,children:\"\\u4EF7\\u683C\\u533A\\u95F4\"}),/*#__PURE__*/_jsx(Radio.Group,{value:priceRange?JSON.stringify(priceRange):'',onChange:e=>{if(e.target.value){const range=JSON.parse(e.target.value);handlePriceRangeChange(range);}},children:/*#__PURE__*/_jsx(Space,{direction:\"vertical\",children:PRICE_RANGES.map((range,index)=>/*#__PURE__*/_jsx(Radio,{value:JSON.stringify(range.value),children:range.label},index))})}),/*#__PURE__*/_jsxs(\"div\",{style:{marginTop:16},children:[/*#__PURE__*/_jsx(Title,{level:5,children:\"\\u81EA\\u5B9A\\u4E49\\u4EF7\\u683C\\u533A\\u95F4\"}),/*#__PURE__*/_jsxs(Space,{children:[/*#__PURE__*/_jsx(InputNumber,{placeholder:\"\\u6700\\u4F4E\\u4EF7\",value:customPriceRange[0],onChange:value=>handleCustomPriceChange(0,value),min:0,style:{width:100}}),/*#__PURE__*/_jsx(Text,{children:\"\\u81F3\"}),/*#__PURE__*/_jsx(InputNumber,{placeholder:\"\\u6700\\u9AD8\\u4EF7\",value:customPriceRange[1],onChange:value=>handleCustomPriceChange(1,value),min:customPriceRange[0]||0,style:{width:100}})]})]})]}),/*#__PURE__*/_jsx(Divider,{}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Title,{level:5,children:\"\\u5546\\u54C1\\u8BC4\\u5206\"}),/*#__PURE__*/_jsx(Space,{direction:\"vertical\",children:[5,4,3,2,1].map(num=>/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',alignItems:'center',cursor:'pointer',padding:'4px 8px',borderRadius:4,backgroundColor:selectedRating===num?'#f0f0f0':'transparent'},onClick:()=>handleRatingChange(num),children:[/*#__PURE__*/_jsx(Rate,{disabled:true,defaultValue:num,style:{fontSize:16}}),/*#__PURE__*/_jsxs(Text,{style:{marginLeft:8},children:[num,\"\\u661F\\u53CA\\u4EE5\\u4E0A\"]})]},num))})]})]});if(searchError){return/*#__PURE__*/_jsx(\"div\",{style:{padding:'20px'},children:/*#__PURE__*/_jsx(Alert,{message:\"\\u641C\\u7D22\\u5931\\u8D25\",description:searchError,type:\"error\",showIcon:true,action:/*#__PURE__*/_jsx(Button,{size:\"small\",danger:true,onClick:()=>dispatch(searchProducts({keyword,current:1,size:12})),children:\"\\u91CD\\u8BD5\"})})});}return/*#__PURE__*/_jsxs(\"div\",{style:{padding:'20px'},children:[/*#__PURE__*/_jsxs(\"div\",{style:{marginBottom:20},children:[/*#__PURE__*/_jsxs(Title,{level:3,children:[\"\\u641C\\u7D22\\u7ED3\\u679C\\uFF1A\\\"\",keyword,\"\\\"\"]}),!searchLoading&&/*#__PURE__*/_jsxs(Text,{type:\"secondary\",children:[\"\\u5171\\u627E\\u5230 \",searchTotal,\" \\u4E2A\\u76F8\\u5173\\u5546\\u54C1\"]})]}),/*#__PURE__*/_jsx(Card,{style:{marginBottom:20},children:/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',justifyContent:'space-between',alignItems:'center'},children:[/*#__PURE__*/_jsxs(Space,{children:[/*#__PURE__*/_jsx(Button,{icon:/*#__PURE__*/_jsx(FilterOutlined,{}),onClick:()=>setFilterDrawerVisible(true),children:\"\\u7B5B\\u9009\"}),/*#__PURE__*/_jsx(Text,{strong:true,children:\"\\u6392\\u5E8F\\u65B9\\u5F0F\\uFF1A\"}),/*#__PURE__*/_jsxs(Select,{style:{width:150},placeholder:\"\\u9009\\u62E9\\u6392\\u5E8F\",value:sortBy,onChange:handleSortChange,children:[/*#__PURE__*/_jsx(Option,{value:\"relevance\",children:\"\\u76F8\\u5173\\u5EA6\"}),/*#__PURE__*/_jsx(Option,{value:\"price_asc\",children:\"\\u4EF7\\u683C\\u4ECE\\u4F4E\\u5230\\u9AD8\"}),/*#__PURE__*/_jsx(Option,{value:\"price_desc\",children:\"\\u4EF7\\u683C\\u4ECE\\u9AD8\\u5230\\u4F4E\"}),/*#__PURE__*/_jsx(Option,{value:\"sales_desc\",children:\"\\u9500\\u91CF\\u4ECE\\u9AD8\\u5230\\u4F4E\"}),/*#__PURE__*/_jsx(Option,{value:\"rating_desc\",children:\"\\u8BC4\\u5206\\u4ECE\\u9AD8\\u5230\\u4F4E\"}),/*#__PURE__*/_jsx(Option,{value:\"created_desc\",children:\"\\u6700\\u65B0\\u53D1\\u5E03\"})]})]}),/*#__PURE__*/_jsxs(Space,{children:[selectedCategories.length>0&&/*#__PURE__*/_jsxs(Tag,{closable:true,onClose:()=>{setSelectedCategories([]);executeSearch();},children:[\"\\u5206\\u7C7B: \",(_allCategories$find=allCategories.find(c=>c.id===selectedCategories[0]))===null||_allCategories$find===void 0?void 0:_allCategories$find.name]}),priceRange&&/*#__PURE__*/_jsxs(Tag,{closable:true,onClose:()=>{setPriceRange(null);setCustomPriceRange([null,null]);executeSearch();},children:[\"\\u4EF7\\u683C: \",priceRange[0],\"-\",priceRange[1],\"\\u5143\"]}),selectedRating&&/*#__PURE__*/_jsxs(Tag,{closable:true,onClose:()=>{setSelectedRating(null);executeSearch();},children:[\"\\u8BC4\\u5206: \",selectedRating,\"\\u661F\\u53CA\\u4EE5\\u4E0A\"]}),(selectedCategories.length>0||priceRange||selectedRating)&&/*#__PURE__*/_jsx(Button,{size:\"small\",onClick:clearAllFilters,children:\"\\u6E05\\u9664\\u6240\\u6709\"})]})]})}),/*#__PURE__*/_jsx(Spin,{spinning:searchLoading,children:searchResults.length>0?/*#__PURE__*/_jsx(Row,{gutter:[16,16],children:searchResults.map(renderProductCard)}):!searchLoading&&/*#__PURE__*/_jsx(Empty,{description:/*#__PURE__*/_jsxs(\"span\",{children:[\"\\u6CA1\\u6709\\u627E\\u5230\\u76F8\\u5173\\u5546\\u54C1\",/*#__PURE__*/_jsx(\"br\",{}),\"\\u8BF7\\u5C1D\\u8BD5\\u5176\\u4ED6\\u5173\\u952E\\u8BCD\\u6216\\u8C03\\u6574\\u7B5B\\u9009\\u6761\\u4EF6\"]}),style:{padding:'60px 0'},children:/*#__PURE__*/_jsx(Button,{type:\"primary\",onClick:()=>navigate('/'),children:\"\\u8FD4\\u56DE\\u9996\\u9875\"})})}),searchTotal>0&&/*#__PURE__*/_jsx(\"div\",{style:{textAlign:'center',marginTop:32},children:/*#__PURE__*/_jsx(Pagination,{current:searchCurrent,total:searchTotal,pageSize:12,showSizeChanger:true,showQuickJumper:true,showTotal:(total,range)=>`第 ${range[0]}-${range[1]} 条，共 ${total} 条`,onChange:handlePageChange,onShowSizeChange:handlePageChange})}),renderFilterDrawer()]});};export default SearchResults;","map":{"version":3,"names":["React","useEffect","useState","Card","Row","Col","Pagination","Spin","Alert","Select","Button","Space","Typography","Image","Tag","Empty","Drawer","Checkbox","Radio","Divider","Rate","Badge","Tooltip","InputNumber","FilterOutlined","ShoppingCartOutlined","EyeOutlined","HeartOutlined","useDispatch","useSelector","useSearchParams","useNavigate","searchProducts","resetSearch","fetchAllCategories","jsx","_jsx","jsxs","_jsxs","Title","Text","Paragraph","Option","Group","CheckboxGroup","PRICE_RANGES","label","value","SearchResults","_allCategories$find","searchParams","setSearchParams","navigate","dispatch","searchResults","searchTotal","searchCurrent","searchLoading","searchError","lastSearchKeyword","state","products","allCategories","categories","filterDrawerVisible","setFilterDrawerVisible","selectedCategories","setSelectedCategories","priceRange","setPriceRange","customPriceRange","setCustomPriceRange","selectedRating","setSelectedRating","sortBy","setSortBy","keyword","get","categoryId","minPrice","maxPrice","rating","sort","parseInt","updateSearchParams","useCallback","params","newParams","URLSearchParams","set","toString","minRating","executeSearch","current","size","length","handlePageChange","page","pageSize","currentSize","setTimeout","handleSortChange","handleCategoryChange","values","handlePriceRangeChange","range","handleCustomPriceChange","index","newRange","handleRatingChange","applyFilters","clearAllFilters","handleProductClick","productId","renderProductCard","product","xs","sm","md","lg","children","Ribbon","text","salesCount","color","style","display","hoverable","marginBottom","cover","position","alt","name","src","imageUrl","height","objectFit","preview","onClick","id","top","right","background","borderRadius","width","alignItems","justifyContent","cursor","fontSize","actions","title","type","icon","e","stopPropagation","Meta","overflow","ellipsis","tooltip","highlightKeyword","description","strong","price","allowHalf","defaultValue","disabled","marginLeft","reviewCount","categoryName","regex","RegExp","parts","split","map","part","test","backgroundColor","renderFilterDrawer","placement","onClose","open","footer","level","onChange","direction","category","JSON","stringify","target","parse","marginTop","placeholder","min","num","padding","message","showIcon","action","danger","closable","find","c","spinning","gutter","textAlign","total","showSizeChanger","showQuickJumper","showTotal","onShowSizeChange"],"sources":["D:/luckymall/frontend/src/components/SearchResults.tsx"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport { \r\n  Card, \r\n  Row, \r\n  Col, \r\n  Pagination, \r\n  Spin, \r\n  Alert, \r\n  Select, \r\n  Button, \r\n  Space, \r\n  Typography,\r\n  Image,\r\n  Tag,\r\n  Empty,\r\n  Drawer,\r\n  Checkbox,\r\n  Radio,\r\n  Slider,\r\n  Divider,\r\n  Rate,\r\n  Badge,\r\n  Tooltip,\r\n  InputNumber\r\n} from 'antd';\r\nimport { \r\n  SearchOutlined, \r\n  FilterOutlined, \r\n  ShoppingCartOutlined, \r\n  EyeOutlined, \r\n  HeartOutlined,\r\n  SortAscendingOutlined,\r\n  HistoryOutlined\r\n} from '@ant-design/icons';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { useSearchParams, useNavigate } from 'react-router-dom';\r\nimport { RootState, AppDispatch } from '../store';\r\nimport { searchProducts, resetSearch } from '../store/slices/productSlice';\r\nimport { fetchAllCategories } from '../store/slices/categorySlice';\r\nimport { Product, ProductSearchParams } from '../types';\r\n\r\nconst { Title, Text, Paragraph } = Typography;\r\nconst { Option } = Select;\r\nconst { Group: CheckboxGroup } = Checkbox;\r\n\r\n// 价格区间选项\r\nconst PRICE_RANGES = [\r\n  { label: '0-100元', value: [0, 100] },\r\n  { label: '100-500元', value: [100, 500] },\r\n  { label: '500-1000元', value: [500, 1000] },\r\n  { label: '1000-5000元', value: [1000, 5000] },\r\n  { label: '5000元以上', value: [5000, 999999] }\r\n];\r\n\r\n// 扩展ProductSearchParams类型\r\ninterface ExtendedProductSearchParams {\r\n  keyword: string;\r\n  current?: number;\r\n  size?: number;\r\n  sortBy?: string;\r\n  categoryId?: number;\r\n  minPrice?: number;\r\n  maxPrice?: number;\r\n  minRating?: number;\r\n}\r\n\r\nconst SearchResults: React.FC = () => {\r\n  const [searchParams, setSearchParams] = useSearchParams();\r\n  const navigate = useNavigate();\r\n  const dispatch = useDispatch<AppDispatch>();\r\n  \r\n  const { \r\n    searchResults, \r\n    searchTotal, \r\n    searchCurrent, \r\n    searchLoading, \r\n    searchError,\r\n    lastSearchKeyword \r\n  } = useSelector((state: RootState) => state.products);\r\n  \r\n  const { allCategories } = useSelector((state: RootState) => state.categories);\r\n  \r\n  const [filterDrawerVisible, setFilterDrawerVisible] = useState(false);\r\n  const [selectedCategories, setSelectedCategories] = useState<number[]>([]);\r\n  const [priceRange, setPriceRange] = useState<[number, number] | null>(null);\r\n  const [customPriceRange, setCustomPriceRange] = useState<[number | null, number | null]>([null, null]);\r\n  const [selectedRating, setSelectedRating] = useState<number | null>(null);\r\n  const [sortBy, setSortBy] = useState<string>('relevance');\r\n  \r\n  // 获取URL参数\r\n  const keyword = searchParams.get('keyword') || '';\r\n  const categoryId = searchParams.get('category');\r\n  const minPrice = searchParams.get('minPrice');\r\n  const maxPrice = searchParams.get('maxPrice');\r\n  const rating = searchParams.get('rating');\r\n  const sort = searchParams.get('sort');\r\n  \r\n  // 初始化筛选条件\r\n  useEffect(() => {\r\n    if (categoryId) {\r\n      setSelectedCategories([parseInt(categoryId)]);\r\n    }\r\n    \r\n    if (minPrice && maxPrice) {\r\n      setPriceRange([parseInt(minPrice), parseInt(maxPrice)]);\r\n      setCustomPriceRange([parseInt(minPrice), parseInt(maxPrice)]);\r\n    }\r\n    \r\n    if (rating) {\r\n      setSelectedRating(parseInt(rating));\r\n    }\r\n    \r\n    if (sort) {\r\n      setSortBy(sort);\r\n    }\r\n  }, [categoryId, minPrice, maxPrice, rating, sort]);\r\n  \r\n  // 更新URL参数\r\n  const updateSearchParams = React.useCallback((params: any) => {\r\n    const newParams = new URLSearchParams();\r\n    \r\n    // 保留关键词\r\n    newParams.set('keyword', keyword);\r\n    \r\n    // 添加分类\r\n    if (params.categoryId) {\r\n      newParams.set('category', params.categoryId.toString());\r\n    }\r\n    \r\n    // 添加价格\r\n    if (params.minPrice) {\r\n      newParams.set('minPrice', params.minPrice.toString());\r\n    }\r\n    if (params.maxPrice) {\r\n      newParams.set('maxPrice', params.maxPrice.toString());\r\n    }\r\n    \r\n    // 添加评分\r\n    if (params.minRating) {\r\n      newParams.set('rating', params.minRating.toString());\r\n    }\r\n    \r\n    // 添加排序\r\n    if (params.sortBy) {\r\n      newParams.set('sort', params.sortBy);\r\n    }\r\n    \r\n    // 更新URL，不刷新页面\r\n    setSearchParams(newParams);\r\n  }, [keyword, setSearchParams]);\r\n\r\n  // 执行搜索，带上所有筛选条件\r\n  const executeSearch = React.useCallback(() => {\r\n    if (!keyword) return; // 如果没有关键词，不执行搜索\r\n    \r\n    const params: ProductSearchParams = {\r\n      keyword,\r\n      current: searchCurrent,\r\n      size: 12\r\n    };\r\n    \r\n    // 添加分类筛选\r\n    if (selectedCategories.length === 1) {\r\n      params.categoryId = selectedCategories[0];\r\n    }\r\n    \r\n    // 添加价格筛选\r\n    if (priceRange) {\r\n      params.minPrice = priceRange[0];\r\n      params.maxPrice = priceRange[1];\r\n    }\r\n    \r\n    // 添加评分筛选\r\n    if (selectedRating !== null) {\r\n      params.minRating = selectedRating;\r\n    }\r\n    \r\n    // 添加排序\r\n    if (sortBy && sortBy !== 'relevance') {\r\n      params.sortBy = sortBy;\r\n    }\r\n    \r\n    // 执行搜索\r\n    dispatch(searchProducts(params));\r\n    \r\n    // 更新URL参数\r\n    updateSearchParams(params);\r\n  }, [keyword, searchCurrent, selectedCategories, priceRange, selectedRating, sortBy, dispatch, updateSearchParams]);\r\n\r\n  useEffect(() => {\r\n    if (keyword && keyword !== lastSearchKeyword) {\r\n      // 获取所有分类\r\n      dispatch(fetchAllCategories());\r\n      \r\n      // 执行搜索，带上筛选参数\r\n      executeSearch();\r\n    }\r\n    \r\n    // 组件卸载时重置搜索结果\r\n    return () => {\r\n      dispatch(resetSearch());\r\n    };\r\n  }, [dispatch, keyword, lastSearchKeyword, executeSearch]);\r\n  \r\n  // 处理分页变化\r\n  const handlePageChange = (page: number, pageSize?: number) => {\r\n    // 更新当前页码和每页数量\r\n    const currentSize = pageSize || 12;\r\n    \r\n    // 使用executeSearch函数而不是直接调用API\r\n    setTimeout(() => {\r\n      executeSearch();\r\n    }, 0);\r\n  };\r\n  \r\n  // 处理排序变化\r\n  const handleSortChange = (value: string) => {\r\n    setSortBy(value);\r\n    \r\n    // 使用executeSearch函数而不是直接调用API\r\n    setTimeout(() => {\r\n      executeSearch();\r\n    }, 0);\r\n  };\r\n  \r\n  // 处理分类选择\r\n  const handleCategoryChange = (values: number[]) => {\r\n    setSelectedCategories(values);\r\n  };\r\n  \r\n  // 处理价格区间选择\r\n  const handlePriceRangeChange = (range: [number, number]) => {\r\n    setPriceRange(range);\r\n    setCustomPriceRange([range[0], range[1]]);\r\n  };\r\n  \r\n  // 处理自定义价格区间\r\n  const handleCustomPriceChange = (index: number, value: number | null) => {\r\n    const newRange = [...customPriceRange];\r\n    newRange[index] = value;\r\n    setCustomPriceRange(newRange as [number | null, number | null]);\r\n    \r\n    if (newRange[0] !== null && newRange[1] !== null) {\r\n      setPriceRange([newRange[0], newRange[1]] as [number, number]);\r\n    }\r\n  };\r\n  \r\n  // 处理评分选择\r\n  const handleRatingChange = (value: number) => {\r\n    setSelectedRating(value === selectedRating ? null : value);\r\n  };\r\n  \r\n  // 应用筛选条件\r\n  const applyFilters = () => {\r\n    setFilterDrawerVisible(false);\r\n    // 使用setTimeout避免在渲染周期中直接调用状态更新\r\n    setTimeout(() => {\r\n      executeSearch();\r\n    }, 0);\r\n  };\r\n  \r\n  // 清除所有筛选条件\r\n  const clearAllFilters = () => {\r\n    setSelectedCategories([]);\r\n    setPriceRange(null);\r\n    setCustomPriceRange([null, null]);\r\n    setSelectedRating(null);\r\n    \r\n    // 使用setTimeout避免在渲染周期中直接调用状态更新\r\n    setTimeout(() => {\r\n      executeSearch();\r\n    }, 0);\r\n    \r\n    // 更新URL参数也放在setTimeout中\r\n    setTimeout(() => {\r\n      const newParams = new URLSearchParams();\r\n      newParams.set('keyword', keyword);\r\n      if (sortBy !== 'relevance') {\r\n        newParams.set('sort', sortBy);\r\n      }\r\n      setSearchParams(newParams);\r\n    }, 0);\r\n  };\r\n  \r\n  // 跳转到商品详情页\r\n  const handleProductClick = (productId: number) => {\r\n    navigate(`/product/${productId}`);\r\n  };\r\n  \r\n  // 渲染商品卡片\r\n  const renderProductCard = (product: Product) => (\r\n    <Col xs={24} sm={12} md={8} lg={6} key={product.id}>\r\n      <Badge.Ribbon \r\n        text={product.salesCount > 100 ? \"热销\" : \"\"} \r\n        color=\"red\" \r\n        style={{ display: product.salesCount > 100 ? 'block' : 'none' }}\r\n      >\r\n        <Card\r\n          hoverable\r\n          style={{ marginBottom: 16 }}\r\n          cover={\r\n            <div style={{ position: 'relative' }}>\r\n              <Image\r\n                alt={product.name}\r\n                src={product.imageUrl || 'https://via.placeholder.com/300x300?text=暂无图片'}\r\n                height={200}\r\n                style={{ objectFit: 'cover' }}\r\n                preview={false}\r\n                onClick={() => handleProductClick(product.id)}\r\n              />\r\n              <div \r\n                style={{ \r\n                  position: 'absolute', \r\n                  top: 8, \r\n                  right: 8, \r\n                  background: 'rgba(255,255,255,0.8)', \r\n                  borderRadius: '50%', \r\n                  width: 32, \r\n                  height: 32, \r\n                  display: 'flex', \r\n                  alignItems: 'center', \r\n                  justifyContent: 'center',\r\n                  cursor: 'pointer'\r\n                }}\r\n              >\r\n                <EyeOutlined style={{ fontSize: 18 }} />\r\n              </div>\r\n            </div>\r\n          }\r\n          onClick={() => handleProductClick(product.id)}\r\n          actions={[\r\n            <Tooltip title=\"查看详情\">\r\n              <Button \r\n                type=\"text\" \r\n                icon={<EyeOutlined />} \r\n                onClick={(e) => {\r\n                  e.stopPropagation();\r\n                  handleProductClick(product.id);\r\n                }}\r\n              />\r\n            </Tooltip>,\r\n            <Tooltip title=\"加入购物车\">\r\n              <Button \r\n                type=\"text\" \r\n                icon={<ShoppingCartOutlined />} \r\n                onClick={(e) => e.stopPropagation()}\r\n              />\r\n            </Tooltip>,\r\n            <Tooltip title=\"收藏\">\r\n              <Button \r\n                type=\"text\" \r\n                icon={<HeartOutlined />} \r\n                onClick={(e) => e.stopPropagation()}\r\n              />\r\n            </Tooltip>\r\n          ]}\r\n        >\r\n          <Card.Meta\r\n            title={\r\n              <div style={{ height: 44, overflow: 'hidden' }}>\r\n                <Text ellipsis={{ tooltip: product.name }}>\r\n                  {/* 高亮搜索关键词 */}\r\n                  {highlightKeyword(product.name, keyword)}\r\n                </Text>\r\n              </div>\r\n            }\r\n            description={\r\n              <div>\r\n                <div style={{ marginBottom: 8 }}>\r\n                  <Text strong style={{ color: '#ff4d4f', fontSize: 18 }}>\r\n                    ¥{product.price}\r\n                  </Text>\r\n                </div>\r\n                <div style={{ marginBottom: 4, display: 'flex', alignItems: 'center' }}>\r\n                  <Rate allowHalf defaultValue={product.rating || 5} disabled style={{ fontSize: 12 }} />\r\n                  <Text type=\"secondary\" style={{ marginLeft: 8 }}>\r\n                    ({product.reviewCount || 0})\r\n                  </Text>\r\n                </div>\r\n                <div style={{ marginBottom: 4 }}>\r\n                  <Text type=\"secondary\">销量: {product.salesCount}</Text>\r\n                </div>\r\n                {product.categoryName && (\r\n                  <Tag color=\"blue\">{product.categoryName}</Tag>\r\n                )}\r\n              </div>\r\n            }\r\n          />\r\n        </Card>\r\n      </Badge.Ribbon>\r\n    </Col>\r\n  );\r\n  \r\n  // 高亮关键词函数\r\n  const highlightKeyword = (text: string, keyword: string) => {\r\n    if (!keyword) return text;\r\n    \r\n    const regex = new RegExp(`(${keyword})`, 'gi');\r\n    const parts = text.split(regex);\r\n    \r\n    return parts.map((part, index) => \r\n      regex.test(part) ? (\r\n        <span key={index} style={{ backgroundColor: '#fff566' }}>\r\n          {part}\r\n        </span>\r\n      ) : (\r\n        part\r\n      )\r\n    );\r\n  };\r\n  \r\n  // 渲染筛选抽屉\r\n  const renderFilterDrawer = () => (\r\n    <Drawer\r\n      title=\"筛选条件\"\r\n      placement=\"right\"\r\n      width={300}\r\n      onClose={() => setFilterDrawerVisible(false)}\r\n      open={filterDrawerVisible}\r\n      footer={\r\n        <div style={{ display: 'flex', justifyContent: 'space-between' }}>\r\n          <Button onClick={clearAllFilters}>清除筛选</Button>\r\n          <Button type=\"primary\" onClick={applyFilters}>应用筛选</Button>\r\n        </div>\r\n      }\r\n    >\r\n      <div style={{ marginBottom: 24 }}>\r\n        <Title level={5}>商品分类</Title>\r\n        <CheckboxGroup\r\n          value={selectedCategories}\r\n          onChange={(values) => handleCategoryChange(values as number[])}\r\n        >\r\n          <Space direction=\"vertical\">\r\n            {allCategories.map(category => (\r\n              <Checkbox key={category.id} value={category.id}>\r\n                {category.name}\r\n              </Checkbox>\r\n            ))}\r\n          </Space>\r\n        </CheckboxGroup>\r\n      </div>\r\n      \r\n      <Divider />\r\n      \r\n      <div style={{ marginBottom: 24 }}>\r\n        <Title level={5}>价格区间</Title>\r\n        <Radio.Group\r\n          value={priceRange ? JSON.stringify(priceRange) : ''}\r\n          onChange={(e) => {\r\n            if (e.target.value) {\r\n              const range = JSON.parse(e.target.value) as [number, number];\r\n              handlePriceRangeChange(range);\r\n            }\r\n          }}\r\n        >\r\n          <Space direction=\"vertical\">\r\n            {PRICE_RANGES.map((range, index) => (\r\n              <Radio key={index} value={JSON.stringify(range.value)}>\r\n                {range.label}\r\n              </Radio>\r\n            ))}\r\n          </Space>\r\n        </Radio.Group>\r\n        \r\n        <div style={{ marginTop: 16 }}>\r\n          <Title level={5}>自定义价格区间</Title>\r\n          <Space>\r\n            <InputNumber\r\n              placeholder=\"最低价\"\r\n              value={customPriceRange[0]}\r\n              onChange={(value) => handleCustomPriceChange(0, value)}\r\n              min={0}\r\n              style={{ width: 100 }}\r\n            />\r\n            <Text>至</Text>\r\n            <InputNumber\r\n              placeholder=\"最高价\"\r\n              value={customPriceRange[1]}\r\n              onChange={(value) => handleCustomPriceChange(1, value)}\r\n              min={customPriceRange[0] || 0}\r\n              style={{ width: 100 }}\r\n            />\r\n          </Space>\r\n        </div>\r\n      </div>\r\n      \r\n      <Divider />\r\n      \r\n      <div>\r\n        <Title level={5}>商品评分</Title>\r\n        <Space direction=\"vertical\">\r\n          {[5, 4, 3, 2, 1].map(num => (\r\n            <div \r\n              key={num} \r\n              style={{ \r\n                display: 'flex', \r\n                alignItems: 'center', \r\n                cursor: 'pointer',\r\n                padding: '4px 8px',\r\n                borderRadius: 4,\r\n                backgroundColor: selectedRating === num ? '#f0f0f0' : 'transparent'\r\n              }}\r\n              onClick={() => handleRatingChange(num)}\r\n            >\r\n              <Rate disabled defaultValue={num} style={{ fontSize: 16 }} />\r\n              <Text style={{ marginLeft: 8 }}>{num}星及以上</Text>\r\n            </div>\r\n          ))}\r\n        </Space>\r\n      </div>\r\n    </Drawer>\r\n  );\r\n  \r\n  if (searchError) {\r\n    return (\r\n      <div style={{ padding: '20px' }}>\r\n        <Alert\r\n          message=\"搜索失败\"\r\n          description={searchError}\r\n          type=\"error\"\r\n          showIcon\r\n          action={\r\n            <Button size=\"small\" danger onClick={() => dispatch(searchProducts({ keyword, current: 1, size: 12 }))}>\r\n              重试\r\n            </Button>\r\n          }\r\n        />\r\n      </div>\r\n    );\r\n  }\r\n  \r\n  return (\r\n    <div style={{ padding: '20px' }}>\r\n      {/* 搜索结果头部 */}\r\n      <div style={{ marginBottom: 20 }}>\r\n        <Title level={3}>\r\n          搜索结果：\"{keyword}\"\r\n        </Title>\r\n        {!searchLoading && (\r\n          <Text type=\"secondary\">\r\n            共找到 {searchTotal} 个相关商品\r\n          </Text>\r\n        )}\r\n      </div>\r\n      \r\n      {/* 筛选和排序工具栏 */}\r\n      <Card style={{ marginBottom: 20 }}>\r\n        <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center' }}>\r\n          <Space>\r\n            <Button \r\n              icon={<FilterOutlined />} \r\n              onClick={() => setFilterDrawerVisible(true)}\r\n            >\r\n              筛选\r\n            </Button>\r\n            \r\n            <Text strong>排序方式：</Text>\r\n            <Select\r\n              style={{ width: 150 }}\r\n              placeholder=\"选择排序\"\r\n              value={sortBy}\r\n              onChange={handleSortChange}\r\n            >\r\n              <Option value=\"relevance\">相关度</Option>\r\n              <Option value=\"price_asc\">价格从低到高</Option>\r\n              <Option value=\"price_desc\">价格从高到低</Option>\r\n              <Option value=\"sales_desc\">销量从高到低</Option>\r\n              <Option value=\"rating_desc\">评分从高到低</Option>\r\n              <Option value=\"created_desc\">最新发布</Option>\r\n            </Select>\r\n          </Space>\r\n          \r\n          <Space>\r\n            {/* 显示已选筛选条件 */}\r\n            {selectedCategories.length > 0 && (\r\n              <Tag closable onClose={() => {\r\n                setSelectedCategories([]);\r\n                executeSearch();\r\n              }}>\r\n                分类: {allCategories.find(c => c.id === selectedCategories[0])?.name}\r\n              </Tag>\r\n            )}\r\n            \r\n            {priceRange && (\r\n              <Tag closable onClose={() => {\r\n                setPriceRange(null);\r\n                setCustomPriceRange([null, null]);\r\n                executeSearch();\r\n              }}>\r\n                价格: {priceRange[0]}-{priceRange[1]}元\r\n              </Tag>\r\n            )}\r\n            \r\n            {selectedRating && (\r\n              <Tag closable onClose={() => {\r\n                setSelectedRating(null);\r\n                executeSearch();\r\n              }}>\r\n                评分: {selectedRating}星及以上\r\n              </Tag>\r\n            )}\r\n            \r\n            {(selectedCategories.length > 0 || priceRange || selectedRating) && (\r\n              <Button size=\"small\" onClick={clearAllFilters}>\r\n                清除所有\r\n              </Button>\r\n            )}\r\n          </Space>\r\n        </div>\r\n      </Card>\r\n      \r\n      {/* 搜索结果列表 */}\r\n      <Spin spinning={searchLoading}>\r\n        {searchResults.length > 0 ? (\r\n          <Row gutter={[16, 16]}>\r\n            {searchResults.map(renderProductCard)}\r\n          </Row>\r\n        ) : !searchLoading && (\r\n          <Empty\r\n            description={\r\n              <span>\r\n                没有找到相关商品<br />\r\n                请尝试其他关键词或调整筛选条件\r\n              </span>\r\n            }\r\n            style={{ padding: '60px 0' }}\r\n          >\r\n            <Button type=\"primary\" onClick={() => navigate('/')}>\r\n              返回首页\r\n            </Button>\r\n          </Empty>\r\n        )}\r\n      </Spin>\r\n      \r\n      {/* 分页 */}\r\n      {searchTotal > 0 && (\r\n        <div style={{ textAlign: 'center', marginTop: 32 }}>\r\n          <Pagination\r\n            current={searchCurrent}\r\n            total={searchTotal}\r\n            pageSize={12}\r\n            showSizeChanger\r\n            showQuickJumper\r\n            showTotal={(total, range) => \r\n              `第 ${range[0]}-${range[1]} 条，共 ${total} 条`\r\n            }\r\n            onChange={handlePageChange}\r\n            onShowSizeChange={handlePageChange}\r\n          />\r\n        </div>\r\n      )}\r\n      \r\n      {/* 筛选抽屉 */}\r\n      {renderFilterDrawer()}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default SearchResults; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
{"ast":null,"code":"var _jsxFileName = \"D:\\\\luckymall\\\\frontend\\\\src\\\\components\\\\SearchResults.tsx\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from 'react';\nimport { Card, Row, Col, Pagination, Spin, Alert, Select, Button, Space, Typography, Image, Tag, Empty, Drawer, Checkbox, Radio, Divider, Rate, Badge, Tooltip, InputNumber } from 'antd';\nimport { FilterOutlined, ShoppingCartOutlined, EyeOutlined, HeartOutlined } from '@ant-design/icons';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { useSearchParams, useNavigate } from 'react-router-dom';\nimport { searchProducts, resetSearch } from '../store/slices/productSlice';\nimport { fetchAllCategories } from '../store/slices/categorySlice';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst {\n  Title,\n  Text,\n  Paragraph\n} = Typography;\nconst {\n  Option\n} = Select;\nconst {\n  Group: CheckboxGroup\n} = Checkbox;\n\n// 价格区间选项\nconst PRICE_RANGES = [{\n  label: '0-100元',\n  value: [0, 100]\n}, {\n  label: '100-500元',\n  value: [100, 500]\n}, {\n  label: '500-1000元',\n  value: [500, 1000]\n}, {\n  label: '1000-5000元',\n  value: [1000, 5000]\n}, {\n  label: '5000元以上',\n  value: [5000, 999999]\n}];\n\n// 扩展ProductSearchParams类型\n\nconst SearchResults = () => {\n  _s();\n  var _allCategories$find;\n  const [searchParams, setSearchParams] = useSearchParams();\n  const navigate = useNavigate();\n  const dispatch = useDispatch();\n  const {\n    searchResults,\n    searchTotal,\n    searchCurrent,\n    searchLoading,\n    searchError,\n    lastSearchKeyword\n  } = useSelector(state => state.products);\n  const {\n    allCategories\n  } = useSelector(state => state.categories);\n  const [filterDrawerVisible, setFilterDrawerVisible] = useState(false);\n  const [selectedCategories, setSelectedCategories] = useState([]);\n  const [priceRange, setPriceRange] = useState(null);\n  const [customPriceRange, setCustomPriceRange] = useState([null, null]);\n  const [selectedRating, setSelectedRating] = useState(null);\n  const [sortBy, setSortBy] = useState('relevance');\n\n  // 获取URL参数\n  const keyword = searchParams.get('keyword') || '';\n  const categoryId = searchParams.get('category');\n  const minPrice = searchParams.get('minPrice');\n  const maxPrice = searchParams.get('maxPrice');\n  const rating = searchParams.get('rating');\n  const sort = searchParams.get('sort');\n\n  // 初始化筛选条件\n  useEffect(() => {\n    if (categoryId) {\n      setSelectedCategories([parseInt(categoryId)]);\n    }\n    if (minPrice && maxPrice) {\n      setPriceRange([parseInt(minPrice), parseInt(maxPrice)]);\n      setCustomPriceRange([parseInt(minPrice), parseInt(maxPrice)]);\n    }\n    if (rating) {\n      setSelectedRating(parseInt(rating));\n    }\n    if (sort) {\n      setSortBy(sort);\n    }\n  }, [categoryId, minPrice, maxPrice, rating, sort]);\n\n  // 更新URL参数\n  const updateSearchParams = React.useCallback(params => {\n    const newParams = new URLSearchParams();\n\n    // 保留关键词\n    newParams.set('keyword', keyword);\n\n    // 添加分类\n    if (params.categoryId) {\n      newParams.set('category', params.categoryId.toString());\n    }\n\n    // 添加价格\n    if (params.minPrice) {\n      newParams.set('minPrice', params.minPrice.toString());\n    }\n    if (params.maxPrice) {\n      newParams.set('maxPrice', params.maxPrice.toString());\n    }\n\n    // 添加评分\n    if (params.minRating) {\n      newParams.set('rating', params.minRating.toString());\n    }\n\n    // 添加排序\n    if (params.sortBy) {\n      newParams.set('sort', params.sortBy);\n    }\n\n    // 更新URL，不刷新页面\n    setSearchParams(newParams);\n  }, [keyword, setSearchParams]);\n\n  // 执行搜索，带上所有筛选条件\n  const executeSearch = React.useCallback(() => {\n    if (!keyword) return; // 如果没有关键词，不执行搜索\n\n    const params = {\n      keyword,\n      current: searchCurrent,\n      size: 12\n    };\n\n    // 添加分类筛选\n    if (selectedCategories.length === 1) {\n      params.categoryId = selectedCategories[0];\n    }\n\n    // 添加价格筛选\n    if (priceRange) {\n      params.minPrice = priceRange[0];\n      params.maxPrice = priceRange[1];\n    }\n\n    // 添加评分筛选\n    if (selectedRating !== null) {\n      params.minRating = selectedRating;\n    }\n\n    // 添加排序\n    if (sortBy && sortBy !== 'relevance') {\n      params.sortBy = sortBy;\n    }\n\n    // 执行搜索\n    dispatch(searchProducts(params));\n\n    // 更新URL参数\n    updateSearchParams(params);\n  }, [keyword, searchCurrent, selectedCategories, priceRange, selectedRating, sortBy, dispatch, updateSearchParams]);\n  useEffect(() => {\n    if (keyword && keyword !== lastSearchKeyword) {\n      // 获取所有分类\n      dispatch(fetchAllCategories());\n\n      // 执行搜索，带上筛选参数\n      executeSearch();\n    }\n\n    // 组件卸载时重置搜索结果\n    return () => {\n      dispatch(resetSearch());\n    };\n  }, [dispatch, keyword, lastSearchKeyword, executeSearch]);\n\n  // 处理分页变化\n  const handlePageChange = (page, pageSize) => {\n    // 使用dispatch更新Redux中的当前页码，而不是直接调用executeSearch\n    dispatch(searchProducts({\n      keyword,\n      current: page,\n      size: pageSize || 12,\n      categoryId: selectedCategories.length === 1 ? selectedCategories[0] : undefined,\n      minPrice: priceRange ? priceRange[0] : undefined,\n      maxPrice: priceRange ? priceRange[1] : undefined,\n      minRating: selectedRating !== null && selectedRating !== void 0 ? selectedRating : undefined,\n      sortBy: sortBy !== 'relevance' ? sortBy : undefined\n    }));\n\n    // 更新URL参数\n    const newParams = new URLSearchParams(searchParams);\n    newParams.set('page', page.toString());\n    if (pageSize) {\n      newParams.set('size', pageSize.toString());\n    }\n    setSearchParams(newParams);\n  };\n\n  // 处理排序变化\n  const handleSortChange = value => {\n    // 先更新本地状态\n    setSortBy(value);\n\n    // 直接使用dispatch调用action，而不是使用setTimeout和executeSearch\n    dispatch(searchProducts({\n      keyword,\n      current: 1,\n      // 排序变化时重置为第一页\n      size: 12,\n      categoryId: selectedCategories.length === 1 ? selectedCategories[0] : undefined,\n      minPrice: priceRange ? priceRange[0] : undefined,\n      maxPrice: priceRange ? priceRange[1] : undefined,\n      minRating: selectedRating !== null && selectedRating !== void 0 ? selectedRating : undefined,\n      sortBy: value !== 'relevance' ? value : undefined\n    }));\n\n    // 更新URL参数\n    const newParams = new URLSearchParams(searchParams);\n    if (value !== 'relevance') {\n      newParams.set('sort', value);\n    } else {\n      newParams.delete('sort');\n    }\n    newParams.set('page', '1'); // 重置页码\n    setSearchParams(newParams);\n  };\n\n  // 处理分类选择\n  const handleCategoryChange = values => {\n    setSelectedCategories(values);\n  };\n\n  // 处理价格区间选择\n  const handlePriceRangeChange = range => {\n    setPriceRange(range);\n    setCustomPriceRange([range[0], range[1]]);\n  };\n\n  // 处理自定义价格区间\n  const handleCustomPriceChange = (index, value) => {\n    const newRange = [...customPriceRange];\n    newRange[index] = value;\n    setCustomPriceRange(newRange);\n    if (newRange[0] !== null && newRange[1] !== null) {\n      setPriceRange([newRange[0], newRange[1]]);\n    }\n  };\n\n  // 处理评分选择\n  const handleRatingChange = value => {\n    setSelectedRating(value === selectedRating ? null : value);\n  };\n\n  // 应用筛选条件\n  const applyFilters = () => {\n    setFilterDrawerVisible(false);\n    // 使用setTimeout避免在渲染周期中直接调用状态更新\n    setTimeout(() => {\n      executeSearch();\n    }, 0);\n  };\n\n  // 清除所有筛选条件\n  const clearAllFilters = () => {\n    setSelectedCategories([]);\n    setPriceRange(null);\n    setCustomPriceRange([null, null]);\n    setSelectedRating(null);\n\n    // 使用setTimeout避免在渲染周期中直接调用状态更新\n    setTimeout(() => {\n      executeSearch();\n    }, 0);\n\n    // 更新URL参数也放在setTimeout中\n    setTimeout(() => {\n      const newParams = new URLSearchParams();\n      newParams.set('keyword', keyword);\n      if (sortBy !== 'relevance') {\n        newParams.set('sort', sortBy);\n      }\n      setSearchParams(newParams);\n    }, 0);\n  };\n\n  // 跳转到商品详情页\n  const handleProductClick = productId => {\n    navigate(`/product/${productId}`);\n  };\n\n  // 渲染商品卡片\n  const renderProductCard = product => /*#__PURE__*/_jsxDEV(Col, {\n    xs: 24,\n    sm: 12,\n    md: 8,\n    lg: 6,\n    children: /*#__PURE__*/_jsxDEV(Badge.Ribbon, {\n      text: product.salesCount > 100 ? \"热销\" : \"\",\n      color: \"red\",\n      style: {\n        display: product.salesCount > 100 ? 'block' : 'none'\n      },\n      children: /*#__PURE__*/_jsxDEV(Card, {\n        hoverable: true,\n        style: {\n          marginBottom: 16\n        },\n        cover: /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            position: 'relative'\n          },\n          children: [/*#__PURE__*/_jsxDEV(Image, {\n            alt: product.name,\n            src: product.imageUrl || 'https://via.placeholder.com/300x300?text=暂无图片',\n            height: 200,\n            style: {\n              objectFit: 'cover'\n            },\n            preview: false,\n            onClick: () => handleProductClick(product.id)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 333,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              position: 'absolute',\n              top: 8,\n              right: 8,\n              background: 'rgba(255,255,255,0.8)',\n              borderRadius: '50%',\n              width: 32,\n              height: 32,\n              display: 'flex',\n              alignItems: 'center',\n              justifyContent: 'center',\n              cursor: 'pointer'\n            },\n            children: /*#__PURE__*/_jsxDEV(EyeOutlined, {\n              style: {\n                fontSize: 18\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 356,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 341,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 332,\n          columnNumber: 13\n        }, this),\n        onClick: () => handleProductClick(product.id),\n        actions: [/*#__PURE__*/_jsxDEV(Tooltip, {\n          title: \"\\u67E5\\u770B\\u8BE6\\u60C5\",\n          children: /*#__PURE__*/_jsxDEV(Button, {\n            type: \"text\",\n            icon: /*#__PURE__*/_jsxDEV(EyeOutlined, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 365,\n              columnNumber: 23\n            }, this),\n            onClick: e => {\n              e.stopPropagation();\n              handleProductClick(product.id);\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 363,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 362,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Tooltip, {\n          title: \"\\u52A0\\u5165\\u8D2D\\u7269\\u8F66\",\n          children: /*#__PURE__*/_jsxDEV(Button, {\n            type: \"text\",\n            icon: /*#__PURE__*/_jsxDEV(ShoppingCartOutlined, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 375,\n              columnNumber: 23\n            }, this),\n            onClick: e => e.stopPropagation()\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 373,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 372,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Tooltip, {\n          title: \"\\u6536\\u85CF\",\n          children: /*#__PURE__*/_jsxDEV(Button, {\n            type: \"text\",\n            icon: /*#__PURE__*/_jsxDEV(HeartOutlined, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 382,\n              columnNumber: 23\n            }, this),\n            onClick: e => e.stopPropagation()\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 380,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 379,\n          columnNumber: 13\n        }, this)],\n        children: /*#__PURE__*/_jsxDEV(Card.Meta, {\n          title: /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              height: 44,\n              overflow: 'hidden'\n            },\n            children: /*#__PURE__*/_jsxDEV(Text, {\n              ellipsis: {\n                tooltip: product.name\n              },\n              children: highlightKeyword(product.name, keyword)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 391,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 390,\n            columnNumber: 15\n          }, this),\n          description: /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                marginBottom: 8\n              },\n              children: /*#__PURE__*/_jsxDEV(Text, {\n                strong: true,\n                style: {\n                  color: '#ff4d4f',\n                  fontSize: 18\n                },\n                children: [\"\\xA5\", product.price]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 400,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 399,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                marginBottom: 4,\n                display: 'flex',\n                alignItems: 'center'\n              },\n              children: [/*#__PURE__*/_jsxDEV(Rate, {\n                allowHalf: true,\n                defaultValue: product.rating || 5,\n                disabled: true,\n                style: {\n                  fontSize: 12\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 405,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(Text, {\n                type: \"secondary\",\n                style: {\n                  marginLeft: 8\n                },\n                children: [\"(\", product.reviewCount || 0, \")\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 406,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 404,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                marginBottom: 4\n              },\n              children: /*#__PURE__*/_jsxDEV(Text, {\n                type: \"secondary\",\n                children: [\"\\u9500\\u91CF: \", product.salesCount]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 411,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 410,\n              columnNumber: 17\n            }, this), product.categoryName && /*#__PURE__*/_jsxDEV(Tag, {\n              color: \"blue\",\n              children: product.categoryName\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 414,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 398,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 388,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 328,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 323,\n      columnNumber: 7\n    }, this)\n  }, product.id, false, {\n    fileName: _jsxFileName,\n    lineNumber: 322,\n    columnNumber: 5\n  }, this);\n\n  // 高亮关键词函数\n  const highlightKeyword = (text, keyword) => {\n    if (!keyword) return text;\n    const regex = new RegExp(`(${keyword})`, 'gi');\n    const parts = text.split(regex);\n    return parts.map((part, index) => regex.test(part) ? /*#__PURE__*/_jsxDEV(\"span\", {\n      style: {\n        backgroundColor: '#fff566'\n      },\n      children: part\n    }, index, false, {\n      fileName: _jsxFileName,\n      lineNumber: 433,\n      columnNumber: 9\n    }, this) : part);\n  };\n\n  // 渲染筛选抽屉\n  const renderFilterDrawer = () => /*#__PURE__*/_jsxDEV(Drawer, {\n    title: \"\\u7B5B\\u9009\\u6761\\u4EF6\",\n    placement: \"right\",\n    width: 300,\n    onClose: () => setFilterDrawerVisible(false),\n    open: filterDrawerVisible,\n    footer: /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        display: 'flex',\n        justifyContent: 'space-between'\n      },\n      children: [/*#__PURE__*/_jsxDEV(Button, {\n        onClick: clearAllFilters,\n        children: \"\\u6E05\\u9664\\u7B5B\\u9009\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 452,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(Button, {\n        type: \"primary\",\n        onClick: applyFilters,\n        children: \"\\u5E94\\u7528\\u7B5B\\u9009\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 453,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 451,\n      columnNumber: 9\n    }, this),\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        marginBottom: 24\n      },\n      children: [/*#__PURE__*/_jsxDEV(Title, {\n        level: 5,\n        children: \"\\u5546\\u54C1\\u5206\\u7C7B\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 458,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(CheckboxGroup, {\n        value: selectedCategories,\n        onChange: values => handleCategoryChange(values),\n        children: /*#__PURE__*/_jsxDEV(Space, {\n          direction: \"vertical\",\n          children: allCategories.map(category => /*#__PURE__*/_jsxDEV(Checkbox, {\n            value: category.id,\n            children: category.name\n          }, category.id, false, {\n            fileName: _jsxFileName,\n            lineNumber: 465,\n            columnNumber: 15\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 463,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 459,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 457,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Divider, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 473,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        marginBottom: 24\n      },\n      children: [/*#__PURE__*/_jsxDEV(Title, {\n        level: 5,\n        children: \"\\u4EF7\\u683C\\u533A\\u95F4\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 476,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Radio.Group, {\n        value: priceRange ? JSON.stringify(priceRange) : '',\n        onChange: e => {\n          if (e.target.value) {\n            const range = JSON.parse(e.target.value);\n            handlePriceRangeChange(range);\n          }\n        },\n        children: /*#__PURE__*/_jsxDEV(Space, {\n          direction: \"vertical\",\n          children: PRICE_RANGES.map((range, index) => /*#__PURE__*/_jsxDEV(Radio, {\n            value: JSON.stringify(range.value),\n            children: range.label\n          }, index, false, {\n            fileName: _jsxFileName,\n            lineNumber: 488,\n            columnNumber: 15\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 486,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 477,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          marginTop: 16\n        },\n        children: [/*#__PURE__*/_jsxDEV(Title, {\n          level: 5,\n          children: \"\\u81EA\\u5B9A\\u4E49\\u4EF7\\u683C\\u533A\\u95F4\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 496,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Space, {\n          children: [/*#__PURE__*/_jsxDEV(InputNumber, {\n            placeholder: \"\\u6700\\u4F4E\\u4EF7\",\n            value: customPriceRange[0],\n            onChange: value => handleCustomPriceChange(0, value),\n            min: 0,\n            style: {\n              width: 100\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 498,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Text, {\n            children: \"\\u81F3\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 505,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(InputNumber, {\n            placeholder: \"\\u6700\\u9AD8\\u4EF7\",\n            value: customPriceRange[1],\n            onChange: value => handleCustomPriceChange(1, value),\n            min: customPriceRange[0] || 0,\n            style: {\n              width: 100\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 506,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 497,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 495,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 475,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Divider, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 517,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(Title, {\n        level: 5,\n        children: \"\\u5546\\u54C1\\u8BC4\\u5206\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 520,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Space, {\n        direction: \"vertical\",\n        children: [5, 4, 3, 2, 1].map(num => /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            display: 'flex',\n            alignItems: 'center',\n            cursor: 'pointer',\n            padding: '4px 8px',\n            borderRadius: 4,\n            backgroundColor: selectedRating === num ? '#f0f0f0' : 'transparent'\n          },\n          onClick: () => handleRatingChange(num),\n          children: [/*#__PURE__*/_jsxDEV(Rate, {\n            disabled: true,\n            defaultValue: num,\n            style: {\n              fontSize: 16\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 535,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(Text, {\n            style: {\n              marginLeft: 8\n            },\n            children: [num, \"\\u661F\\u53CA\\u4EE5\\u4E0A\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 536,\n            columnNumber: 15\n          }, this)]\n        }, num, true, {\n          fileName: _jsxFileName,\n          lineNumber: 523,\n          columnNumber: 13\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 521,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 519,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 444,\n    columnNumber: 5\n  }, this);\n  if (searchError) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        padding: '20px'\n      },\n      children: /*#__PURE__*/_jsxDEV(Alert, {\n        message: \"\\u641C\\u7D22\\u5931\\u8D25\",\n        description: searchError,\n        type: \"error\",\n        showIcon: true,\n        action: /*#__PURE__*/_jsxDEV(Button, {\n          size: \"small\",\n          danger: true,\n          onClick: () => dispatch(searchProducts({\n            keyword,\n            current: 1,\n            size: 12\n          })),\n          children: \"\\u91CD\\u8BD5\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 553,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 547,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 546,\n      columnNumber: 7\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      padding: '20px'\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        marginBottom: 20\n      },\n      children: [/*#__PURE__*/_jsxDEV(Title, {\n        level: 3,\n        children: [\"\\u641C\\u7D22\\u7ED3\\u679C\\uFF1A\\\"\", keyword, \"\\\"\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 566,\n        columnNumber: 9\n      }, this), !searchLoading && /*#__PURE__*/_jsxDEV(Text, {\n        type: \"secondary\",\n        children: [\"\\u5171\\u627E\\u5230 \", searchTotal, \" \\u4E2A\\u76F8\\u5173\\u5546\\u54C1\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 570,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 565,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Card, {\n      style: {\n        marginBottom: 20\n      },\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          display: 'flex',\n          justifyContent: 'space-between',\n          alignItems: 'center'\n        },\n        children: [/*#__PURE__*/_jsxDEV(Space, {\n          children: [/*#__PURE__*/_jsxDEV(Button, {\n            icon: /*#__PURE__*/_jsxDEV(FilterOutlined, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 581,\n              columnNumber: 21\n            }, this),\n            onClick: () => setFilterDrawerVisible(true),\n            children: \"\\u7B5B\\u9009\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 580,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Text, {\n            strong: true,\n            children: \"\\u6392\\u5E8F\\u65B9\\u5F0F\\uFF1A\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 587,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Select, {\n            style: {\n              width: 150\n            },\n            placeholder: \"\\u9009\\u62E9\\u6392\\u5E8F\",\n            value: sortBy,\n            onChange: handleSortChange,\n            children: [/*#__PURE__*/_jsxDEV(Option, {\n              value: \"relevance\",\n              children: \"\\u76F8\\u5173\\u5EA6\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 594,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(Option, {\n              value: \"price_asc\",\n              children: \"\\u4EF7\\u683C\\u4ECE\\u4F4E\\u5230\\u9AD8\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 595,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(Option, {\n              value: \"price_desc\",\n              children: \"\\u4EF7\\u683C\\u4ECE\\u9AD8\\u5230\\u4F4E\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 596,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(Option, {\n              value: \"sales_desc\",\n              children: \"\\u9500\\u91CF\\u4ECE\\u9AD8\\u5230\\u4F4E\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 597,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(Option, {\n              value: \"rating_desc\",\n              children: \"\\u8BC4\\u5206\\u4ECE\\u9AD8\\u5230\\u4F4E\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 598,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(Option, {\n              value: \"created_desc\",\n              children: \"\\u6700\\u65B0\\u53D1\\u5E03\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 599,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 588,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 579,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Space, {\n          children: [selectedCategories.length > 0 && /*#__PURE__*/_jsxDEV(Tag, {\n            closable: true,\n            onClose: () => {\n              setSelectedCategories([]);\n              executeSearch();\n            },\n            children: [\"\\u5206\\u7C7B: \", (_allCategories$find = allCategories.find(c => c.id === selectedCategories[0])) === null || _allCategories$find === void 0 ? void 0 : _allCategories$find.name]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 606,\n            columnNumber: 15\n          }, this), priceRange && /*#__PURE__*/_jsxDEV(Tag, {\n            closable: true,\n            onClose: () => {\n              setPriceRange(null);\n              setCustomPriceRange([null, null]);\n              executeSearch();\n            },\n            children: [\"\\u4EF7\\u683C: \", priceRange[0], \"-\", priceRange[1], \"\\u5143\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 615,\n            columnNumber: 15\n          }, this), selectedRating && /*#__PURE__*/_jsxDEV(Tag, {\n            closable: true,\n            onClose: () => {\n              setSelectedRating(null);\n              executeSearch();\n            },\n            children: [\"\\u8BC4\\u5206: \", selectedRating, \"\\u661F\\u53CA\\u4EE5\\u4E0A\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 625,\n            columnNumber: 15\n          }, this), (selectedCategories.length > 0 || priceRange || selectedRating) && /*#__PURE__*/_jsxDEV(Button, {\n            size: \"small\",\n            onClick: clearAllFilters,\n            children: \"\\u6E05\\u9664\\u6240\\u6709\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 634,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 603,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 578,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 577,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Spin, {\n      spinning: searchLoading,\n      children: searchResults.length > 0 ? /*#__PURE__*/_jsxDEV(Row, {\n        gutter: [16, 16],\n        children: searchResults.map(renderProductCard)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 645,\n        columnNumber: 11\n      }, this) : !searchLoading && /*#__PURE__*/_jsxDEV(Empty, {\n        description: /*#__PURE__*/_jsxDEV(\"span\", {\n          children: [\"\\u6CA1\\u6709\\u627E\\u5230\\u76F8\\u5173\\u5546\\u54C1\", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 652,\n            columnNumber: 25\n          }, this), \"\\u8BF7\\u5C1D\\u8BD5\\u5176\\u4ED6\\u5173\\u952E\\u8BCD\\u6216\\u8C03\\u6574\\u7B5B\\u9009\\u6761\\u4EF6\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 651,\n          columnNumber: 15\n        }, this),\n        style: {\n          padding: '60px 0'\n        },\n        children: /*#__PURE__*/_jsxDEV(Button, {\n          type: \"primary\",\n          onClick: () => navigate('/'),\n          children: \"\\u8FD4\\u56DE\\u9996\\u9875\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 658,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 649,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 643,\n      columnNumber: 7\n    }, this), searchTotal > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        textAlign: 'center',\n        marginTop: 32\n      },\n      children: /*#__PURE__*/_jsxDEV(Pagination, {\n        current: searchCurrent,\n        total: searchTotal,\n        pageSize: 12,\n        showSizeChanger: true,\n        showQuickJumper: true,\n        showTotal: (total, range) => `第 ${range[0]}-${range[1]} 条，共 ${total} 条`,\n        onChange: handlePageChange,\n        onShowSizeChange: handlePageChange\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 668,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 667,\n      columnNumber: 9\n    }, this), renderFilterDrawer()]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 563,\n    columnNumber: 5\n  }, this);\n};\n_s(SearchResults, \"NU5mBlTNjqCm2EN+YmQ8c4NDRI8=\", false, function () {\n  return [useSearchParams, useNavigate, useDispatch, useSelector, useSelector];\n});\n_c = SearchResults;\nexport default SearchResults;\nvar _c;\n$RefreshReg$(_c, \"SearchResults\");","map":{"version":3,"names":["React","useEffect","useState","Card","Row","Col","Pagination","Spin","Alert","Select","Button","Space","Typography","Image","Tag","Empty","Drawer","Checkbox","Radio","Divider","Rate","Badge","Tooltip","InputNumber","FilterOutlined","ShoppingCartOutlined","EyeOutlined","HeartOutlined","useDispatch","useSelector","useSearchParams","useNavigate","searchProducts","resetSearch","fetchAllCategories","jsxDEV","_jsxDEV","Title","Text","Paragraph","Option","Group","CheckboxGroup","PRICE_RANGES","label","value","SearchResults","_s","_allCategories$find","searchParams","setSearchParams","navigate","dispatch","searchResults","searchTotal","searchCurrent","searchLoading","searchError","lastSearchKeyword","state","products","allCategories","categories","filterDrawerVisible","setFilterDrawerVisible","selectedCategories","setSelectedCategories","priceRange","setPriceRange","customPriceRange","setCustomPriceRange","selectedRating","setSelectedRating","sortBy","setSortBy","keyword","get","categoryId","minPrice","maxPrice","rating","sort","parseInt","updateSearchParams","useCallback","params","newParams","URLSearchParams","set","toString","minRating","executeSearch","current","size","length","handlePageChange","page","pageSize","undefined","handleSortChange","delete","handleCategoryChange","values","handlePriceRangeChange","range","handleCustomPriceChange","index","newRange","handleRatingChange","applyFilters","setTimeout","clearAllFilters","handleProductClick","productId","renderProductCard","product","xs","sm","md","lg","children","Ribbon","text","salesCount","color","style","display","hoverable","marginBottom","cover","position","alt","name","src","imageUrl","height","objectFit","preview","onClick","id","fileName","_jsxFileName","lineNumber","columnNumber","top","right","background","borderRadius","width","alignItems","justifyContent","cursor","fontSize","actions","title","type","icon","e","stopPropagation","Meta","overflow","ellipsis","tooltip","highlightKeyword","description","strong","price","allowHalf","defaultValue","disabled","marginLeft","reviewCount","categoryName","regex","RegExp","parts","split","map","part","test","backgroundColor","renderFilterDrawer","placement","onClose","open","footer","level","onChange","direction","category","JSON","stringify","target","parse","marginTop","placeholder","min","num","padding","message","showIcon","action","danger","closable","find","c","spinning","gutter","textAlign","total","showSizeChanger","showQuickJumper","showTotal","onShowSizeChange","_c","$RefreshReg$"],"sources":["D:/luckymall/frontend/src/components/SearchResults.tsx"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport { \r\n  Card, \r\n  Row, \r\n  Col, \r\n  Pagination, \r\n  Spin, \r\n  Alert, \r\n  Select, \r\n  Button, \r\n  Space, \r\n  Typography,\r\n  Image,\r\n  Tag,\r\n  Empty,\r\n  Drawer,\r\n  Checkbox,\r\n  Radio,\r\n  Slider,\r\n  Divider,\r\n  Rate,\r\n  Badge,\r\n  Tooltip,\r\n  InputNumber\r\n} from 'antd';\r\nimport { \r\n  SearchOutlined, \r\n  FilterOutlined, \r\n  ShoppingCartOutlined, \r\n  EyeOutlined, \r\n  HeartOutlined,\r\n  SortAscendingOutlined,\r\n  HistoryOutlined\r\n} from '@ant-design/icons';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { useSearchParams, useNavigate } from 'react-router-dom';\r\nimport { RootState, AppDispatch } from '../store';\r\nimport { searchProducts, resetSearch } from '../store/slices/productSlice';\r\nimport { fetchAllCategories } from '../store/slices/categorySlice';\r\nimport { Product, ProductSearchParams } from '../types';\r\n\r\nconst { Title, Text, Paragraph } = Typography;\r\nconst { Option } = Select;\r\nconst { Group: CheckboxGroup } = Checkbox;\r\n\r\n// 价格区间选项\r\nconst PRICE_RANGES = [\r\n  { label: '0-100元', value: [0, 100] },\r\n  { label: '100-500元', value: [100, 500] },\r\n  { label: '500-1000元', value: [500, 1000] },\r\n  { label: '1000-5000元', value: [1000, 5000] },\r\n  { label: '5000元以上', value: [5000, 999999] }\r\n];\r\n\r\n// 扩展ProductSearchParams类型\r\ninterface ExtendedProductSearchParams {\r\n  keyword: string;\r\n  current?: number;\r\n  size?: number;\r\n  sortBy?: string;\r\n  categoryId?: number;\r\n  minPrice?: number;\r\n  maxPrice?: number;\r\n  minRating?: number;\r\n}\r\n\r\nconst SearchResults: React.FC = () => {\r\n  const [searchParams, setSearchParams] = useSearchParams();\r\n  const navigate = useNavigate();\r\n  const dispatch = useDispatch<AppDispatch>();\r\n  \r\n  const { \r\n    searchResults, \r\n    searchTotal, \r\n    searchCurrent, \r\n    searchLoading, \r\n    searchError,\r\n    lastSearchKeyword \r\n  } = useSelector((state: RootState) => state.products);\r\n  \r\n  const { allCategories } = useSelector((state: RootState) => state.categories);\r\n  \r\n  const [filterDrawerVisible, setFilterDrawerVisible] = useState(false);\r\n  const [selectedCategories, setSelectedCategories] = useState<number[]>([]);\r\n  const [priceRange, setPriceRange] = useState<[number, number] | null>(null);\r\n  const [customPriceRange, setCustomPriceRange] = useState<[number | null, number | null]>([null, null]);\r\n  const [selectedRating, setSelectedRating] = useState<number | null>(null);\r\n  const [sortBy, setSortBy] = useState<string>('relevance');\r\n  \r\n  // 获取URL参数\r\n  const keyword = searchParams.get('keyword') || '';\r\n  const categoryId = searchParams.get('category');\r\n  const minPrice = searchParams.get('minPrice');\r\n  const maxPrice = searchParams.get('maxPrice');\r\n  const rating = searchParams.get('rating');\r\n  const sort = searchParams.get('sort');\r\n  \r\n  // 初始化筛选条件\r\n  useEffect(() => {\r\n    if (categoryId) {\r\n      setSelectedCategories([parseInt(categoryId)]);\r\n    }\r\n    \r\n    if (minPrice && maxPrice) {\r\n      setPriceRange([parseInt(minPrice), parseInt(maxPrice)]);\r\n      setCustomPriceRange([parseInt(minPrice), parseInt(maxPrice)]);\r\n    }\r\n    \r\n    if (rating) {\r\n      setSelectedRating(parseInt(rating));\r\n    }\r\n    \r\n    if (sort) {\r\n      setSortBy(sort);\r\n    }\r\n  }, [categoryId, minPrice, maxPrice, rating, sort]);\r\n  \r\n  // 更新URL参数\r\n  const updateSearchParams = React.useCallback((params: any) => {\r\n    const newParams = new URLSearchParams();\r\n    \r\n    // 保留关键词\r\n    newParams.set('keyword', keyword);\r\n    \r\n    // 添加分类\r\n    if (params.categoryId) {\r\n      newParams.set('category', params.categoryId.toString());\r\n    }\r\n    \r\n    // 添加价格\r\n    if (params.minPrice) {\r\n      newParams.set('minPrice', params.minPrice.toString());\r\n    }\r\n    if (params.maxPrice) {\r\n      newParams.set('maxPrice', params.maxPrice.toString());\r\n    }\r\n    \r\n    // 添加评分\r\n    if (params.minRating) {\r\n      newParams.set('rating', params.minRating.toString());\r\n    }\r\n    \r\n    // 添加排序\r\n    if (params.sortBy) {\r\n      newParams.set('sort', params.sortBy);\r\n    }\r\n    \r\n    // 更新URL，不刷新页面\r\n    setSearchParams(newParams);\r\n  }, [keyword, setSearchParams]);\r\n\r\n  // 执行搜索，带上所有筛选条件\r\n  const executeSearch = React.useCallback(() => {\r\n    if (!keyword) return; // 如果没有关键词，不执行搜索\r\n    \r\n    const params: ProductSearchParams = {\r\n      keyword,\r\n      current: searchCurrent,\r\n      size: 12\r\n    };\r\n    \r\n    // 添加分类筛选\r\n    if (selectedCategories.length === 1) {\r\n      params.categoryId = selectedCategories[0];\r\n    }\r\n    \r\n    // 添加价格筛选\r\n    if (priceRange) {\r\n      params.minPrice = priceRange[0];\r\n      params.maxPrice = priceRange[1];\r\n    }\r\n    \r\n    // 添加评分筛选\r\n    if (selectedRating !== null) {\r\n      params.minRating = selectedRating;\r\n    }\r\n    \r\n    // 添加排序\r\n    if (sortBy && sortBy !== 'relevance') {\r\n      params.sortBy = sortBy;\r\n    }\r\n    \r\n    // 执行搜索\r\n    dispatch(searchProducts(params));\r\n    \r\n    // 更新URL参数\r\n    updateSearchParams(params);\r\n  }, [keyword, searchCurrent, selectedCategories, priceRange, selectedRating, sortBy, dispatch, updateSearchParams]);\r\n\r\n  useEffect(() => {\r\n    if (keyword && keyword !== lastSearchKeyword) {\r\n      // 获取所有分类\r\n      dispatch(fetchAllCategories());\r\n      \r\n      // 执行搜索，带上筛选参数\r\n      executeSearch();\r\n    }\r\n    \r\n    // 组件卸载时重置搜索结果\r\n    return () => {\r\n      dispatch(resetSearch());\r\n    };\r\n  }, [dispatch, keyword, lastSearchKeyword, executeSearch]);\r\n  \r\n  // 处理分页变化\r\n  const handlePageChange = (page: number, pageSize?: number) => {\r\n    // 使用dispatch更新Redux中的当前页码，而不是直接调用executeSearch\r\n    dispatch(searchProducts({ \r\n      keyword,\r\n      current: page, \r\n      size: pageSize || 12,\r\n      categoryId: selectedCategories.length === 1 ? selectedCategories[0] : undefined,\r\n      minPrice: priceRange ? priceRange[0] : undefined,\r\n      maxPrice: priceRange ? priceRange[1] : undefined,\r\n      minRating: selectedRating ?? undefined,\r\n      sortBy: sortBy !== 'relevance' ? sortBy : undefined\r\n    }));\r\n    \r\n    // 更新URL参数\r\n    const newParams = new URLSearchParams(searchParams);\r\n    newParams.set('page', page.toString());\r\n    if (pageSize) {\r\n      newParams.set('size', pageSize.toString());\r\n    }\r\n    setSearchParams(newParams);\r\n  };\r\n  \r\n  // 处理排序变化\r\n  const handleSortChange = (value: string) => {\r\n    // 先更新本地状态\r\n    setSortBy(value);\r\n    \r\n    // 直接使用dispatch调用action，而不是使用setTimeout和executeSearch\r\n    dispatch(searchProducts({ \r\n      keyword,\r\n      current: 1, // 排序变化时重置为第一页\r\n      size: 12,\r\n      categoryId: selectedCategories.length === 1 ? selectedCategories[0] : undefined,\r\n      minPrice: priceRange ? priceRange[0] : undefined,\r\n      maxPrice: priceRange ? priceRange[1] : undefined,\r\n      minRating: selectedRating ?? undefined,\r\n      sortBy: value !== 'relevance' ? value : undefined\r\n    }));\r\n    \r\n    // 更新URL参数\r\n    const newParams = new URLSearchParams(searchParams);\r\n    if (value !== 'relevance') {\r\n      newParams.set('sort', value);\r\n    } else {\r\n      newParams.delete('sort');\r\n    }\r\n    newParams.set('page', '1'); // 重置页码\r\n    setSearchParams(newParams);\r\n  };\r\n  \r\n  // 处理分类选择\r\n  const handleCategoryChange = (values: number[]) => {\r\n    setSelectedCategories(values);\r\n  };\r\n  \r\n  // 处理价格区间选择\r\n  const handlePriceRangeChange = (range: [number, number]) => {\r\n    setPriceRange(range);\r\n    setCustomPriceRange([range[0], range[1]]);\r\n  };\r\n  \r\n  // 处理自定义价格区间\r\n  const handleCustomPriceChange = (index: number, value: number | null) => {\r\n    const newRange = [...customPriceRange];\r\n    newRange[index] = value;\r\n    setCustomPriceRange(newRange as [number | null, number | null]);\r\n    \r\n    if (newRange[0] !== null && newRange[1] !== null) {\r\n      setPriceRange([newRange[0], newRange[1]] as [number, number]);\r\n    }\r\n  };\r\n  \r\n  // 处理评分选择\r\n  const handleRatingChange = (value: number) => {\r\n    setSelectedRating(value === selectedRating ? null : value);\r\n  };\r\n  \r\n  // 应用筛选条件\r\n  const applyFilters = () => {\r\n    setFilterDrawerVisible(false);\r\n    // 使用setTimeout避免在渲染周期中直接调用状态更新\r\n    setTimeout(() => {\r\n      executeSearch();\r\n    }, 0);\r\n  };\r\n  \r\n  // 清除所有筛选条件\r\n  const clearAllFilters = () => {\r\n    setSelectedCategories([]);\r\n    setPriceRange(null);\r\n    setCustomPriceRange([null, null]);\r\n    setSelectedRating(null);\r\n    \r\n    // 使用setTimeout避免在渲染周期中直接调用状态更新\r\n    setTimeout(() => {\r\n      executeSearch();\r\n    }, 0);\r\n    \r\n    // 更新URL参数也放在setTimeout中\r\n    setTimeout(() => {\r\n      const newParams = new URLSearchParams();\r\n      newParams.set('keyword', keyword);\r\n      if (sortBy !== 'relevance') {\r\n        newParams.set('sort', sortBy);\r\n      }\r\n      setSearchParams(newParams);\r\n    }, 0);\r\n  };\r\n  \r\n  // 跳转到商品详情页\r\n  const handleProductClick = (productId: number) => {\r\n    navigate(`/product/${productId}`);\r\n  };\r\n  \r\n  // 渲染商品卡片\r\n  const renderProductCard = (product: Product) => (\r\n    <Col xs={24} sm={12} md={8} lg={6} key={product.id}>\r\n      <Badge.Ribbon \r\n        text={product.salesCount > 100 ? \"热销\" : \"\"} \r\n        color=\"red\" \r\n        style={{ display: product.salesCount > 100 ? 'block' : 'none' }}\r\n      >\r\n        <Card\r\n          hoverable\r\n          style={{ marginBottom: 16 }}\r\n          cover={\r\n            <div style={{ position: 'relative' }}>\r\n              <Image\r\n                alt={product.name}\r\n                src={product.imageUrl || 'https://via.placeholder.com/300x300?text=暂无图片'}\r\n                height={200}\r\n                style={{ objectFit: 'cover' }}\r\n                preview={false}\r\n                onClick={() => handleProductClick(product.id)}\r\n              />\r\n              <div \r\n                style={{ \r\n                  position: 'absolute', \r\n                  top: 8, \r\n                  right: 8, \r\n                  background: 'rgba(255,255,255,0.8)', \r\n                  borderRadius: '50%', \r\n                  width: 32, \r\n                  height: 32, \r\n                  display: 'flex', \r\n                  alignItems: 'center', \r\n                  justifyContent: 'center',\r\n                  cursor: 'pointer'\r\n                }}\r\n              >\r\n                <EyeOutlined style={{ fontSize: 18 }} />\r\n              </div>\r\n            </div>\r\n          }\r\n          onClick={() => handleProductClick(product.id)}\r\n          actions={[\r\n            <Tooltip title=\"查看详情\">\r\n              <Button \r\n                type=\"text\" \r\n                icon={<EyeOutlined />} \r\n                onClick={(e) => {\r\n                  e.stopPropagation();\r\n                  handleProductClick(product.id);\r\n                }}\r\n              />\r\n            </Tooltip>,\r\n            <Tooltip title=\"加入购物车\">\r\n              <Button \r\n                type=\"text\" \r\n                icon={<ShoppingCartOutlined />} \r\n                onClick={(e) => e.stopPropagation()}\r\n              />\r\n            </Tooltip>,\r\n            <Tooltip title=\"收藏\">\r\n              <Button \r\n                type=\"text\" \r\n                icon={<HeartOutlined />} \r\n                onClick={(e) => e.stopPropagation()}\r\n              />\r\n            </Tooltip>\r\n          ]}\r\n        >\r\n          <Card.Meta\r\n            title={\r\n              <div style={{ height: 44, overflow: 'hidden' }}>\r\n                <Text ellipsis={{ tooltip: product.name }}>\r\n                  {/* 高亮搜索关键词 */}\r\n                  {highlightKeyword(product.name, keyword)}\r\n                </Text>\r\n              </div>\r\n            }\r\n            description={\r\n              <div>\r\n                <div style={{ marginBottom: 8 }}>\r\n                  <Text strong style={{ color: '#ff4d4f', fontSize: 18 }}>\r\n                    ¥{product.price}\r\n                  </Text>\r\n                </div>\r\n                <div style={{ marginBottom: 4, display: 'flex', alignItems: 'center' }}>\r\n                  <Rate allowHalf defaultValue={product.rating || 5} disabled style={{ fontSize: 12 }} />\r\n                  <Text type=\"secondary\" style={{ marginLeft: 8 }}>\r\n                    ({product.reviewCount || 0})\r\n                  </Text>\r\n                </div>\r\n                <div style={{ marginBottom: 4 }}>\r\n                  <Text type=\"secondary\">销量: {product.salesCount}</Text>\r\n                </div>\r\n                {product.categoryName && (\r\n                  <Tag color=\"blue\">{product.categoryName}</Tag>\r\n                )}\r\n              </div>\r\n            }\r\n          />\r\n        </Card>\r\n      </Badge.Ribbon>\r\n    </Col>\r\n  );\r\n  \r\n  // 高亮关键词函数\r\n  const highlightKeyword = (text: string, keyword: string) => {\r\n    if (!keyword) return text;\r\n    \r\n    const regex = new RegExp(`(${keyword})`, 'gi');\r\n    const parts = text.split(regex);\r\n    \r\n    return parts.map((part, index) => \r\n      regex.test(part) ? (\r\n        <span key={index} style={{ backgroundColor: '#fff566' }}>\r\n          {part}\r\n        </span>\r\n      ) : (\r\n        part\r\n      )\r\n    );\r\n  };\r\n  \r\n  // 渲染筛选抽屉\r\n  const renderFilterDrawer = () => (\r\n    <Drawer\r\n      title=\"筛选条件\"\r\n      placement=\"right\"\r\n      width={300}\r\n      onClose={() => setFilterDrawerVisible(false)}\r\n      open={filterDrawerVisible}\r\n      footer={\r\n        <div style={{ display: 'flex', justifyContent: 'space-between' }}>\r\n          <Button onClick={clearAllFilters}>清除筛选</Button>\r\n          <Button type=\"primary\" onClick={applyFilters}>应用筛选</Button>\r\n        </div>\r\n      }\r\n    >\r\n      <div style={{ marginBottom: 24 }}>\r\n        <Title level={5}>商品分类</Title>\r\n        <CheckboxGroup\r\n          value={selectedCategories}\r\n          onChange={(values) => handleCategoryChange(values as number[])}\r\n        >\r\n          <Space direction=\"vertical\">\r\n            {allCategories.map(category => (\r\n              <Checkbox key={category.id} value={category.id}>\r\n                {category.name}\r\n              </Checkbox>\r\n            ))}\r\n          </Space>\r\n        </CheckboxGroup>\r\n      </div>\r\n      \r\n      <Divider />\r\n      \r\n      <div style={{ marginBottom: 24 }}>\r\n        <Title level={5}>价格区间</Title>\r\n        <Radio.Group\r\n          value={priceRange ? JSON.stringify(priceRange) : ''}\r\n          onChange={(e) => {\r\n            if (e.target.value) {\r\n              const range = JSON.parse(e.target.value) as [number, number];\r\n              handlePriceRangeChange(range);\r\n            }\r\n          }}\r\n        >\r\n          <Space direction=\"vertical\">\r\n            {PRICE_RANGES.map((range, index) => (\r\n              <Radio key={index} value={JSON.stringify(range.value)}>\r\n                {range.label}\r\n              </Radio>\r\n            ))}\r\n          </Space>\r\n        </Radio.Group>\r\n        \r\n        <div style={{ marginTop: 16 }}>\r\n          <Title level={5}>自定义价格区间</Title>\r\n          <Space>\r\n            <InputNumber\r\n              placeholder=\"最低价\"\r\n              value={customPriceRange[0]}\r\n              onChange={(value) => handleCustomPriceChange(0, value)}\r\n              min={0}\r\n              style={{ width: 100 }}\r\n            />\r\n            <Text>至</Text>\r\n            <InputNumber\r\n              placeholder=\"最高价\"\r\n              value={customPriceRange[1]}\r\n              onChange={(value) => handleCustomPriceChange(1, value)}\r\n              min={customPriceRange[0] || 0}\r\n              style={{ width: 100 }}\r\n            />\r\n          </Space>\r\n        </div>\r\n      </div>\r\n      \r\n      <Divider />\r\n      \r\n      <div>\r\n        <Title level={5}>商品评分</Title>\r\n        <Space direction=\"vertical\">\r\n          {[5, 4, 3, 2, 1].map(num => (\r\n            <div \r\n              key={num} \r\n              style={{ \r\n                display: 'flex', \r\n                alignItems: 'center', \r\n                cursor: 'pointer',\r\n                padding: '4px 8px',\r\n                borderRadius: 4,\r\n                backgroundColor: selectedRating === num ? '#f0f0f0' : 'transparent'\r\n              }}\r\n              onClick={() => handleRatingChange(num)}\r\n            >\r\n              <Rate disabled defaultValue={num} style={{ fontSize: 16 }} />\r\n              <Text style={{ marginLeft: 8 }}>{num}星及以上</Text>\r\n            </div>\r\n          ))}\r\n        </Space>\r\n      </div>\r\n    </Drawer>\r\n  );\r\n  \r\n  if (searchError) {\r\n    return (\r\n      <div style={{ padding: '20px' }}>\r\n        <Alert\r\n          message=\"搜索失败\"\r\n          description={searchError}\r\n          type=\"error\"\r\n          showIcon\r\n          action={\r\n            <Button size=\"small\" danger onClick={() => dispatch(searchProducts({ keyword, current: 1, size: 12 }))}>\r\n              重试\r\n            </Button>\r\n          }\r\n        />\r\n      </div>\r\n    );\r\n  }\r\n  \r\n  return (\r\n    <div style={{ padding: '20px' }}>\r\n      {/* 搜索结果头部 */}\r\n      <div style={{ marginBottom: 20 }}>\r\n        <Title level={3}>\r\n          搜索结果：\"{keyword}\"\r\n        </Title>\r\n        {!searchLoading && (\r\n          <Text type=\"secondary\">\r\n            共找到 {searchTotal} 个相关商品\r\n          </Text>\r\n        )}\r\n      </div>\r\n      \r\n      {/* 筛选和排序工具栏 */}\r\n      <Card style={{ marginBottom: 20 }}>\r\n        <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center' }}>\r\n          <Space>\r\n            <Button \r\n              icon={<FilterOutlined />} \r\n              onClick={() => setFilterDrawerVisible(true)}\r\n            >\r\n              筛选\r\n            </Button>\r\n            \r\n            <Text strong>排序方式：</Text>\r\n            <Select\r\n              style={{ width: 150 }}\r\n              placeholder=\"选择排序\"\r\n              value={sortBy}\r\n              onChange={handleSortChange}\r\n            >\r\n              <Option value=\"relevance\">相关度</Option>\r\n              <Option value=\"price_asc\">价格从低到高</Option>\r\n              <Option value=\"price_desc\">价格从高到低</Option>\r\n              <Option value=\"sales_desc\">销量从高到低</Option>\r\n              <Option value=\"rating_desc\">评分从高到低</Option>\r\n              <Option value=\"created_desc\">最新发布</Option>\r\n            </Select>\r\n          </Space>\r\n          \r\n          <Space>\r\n            {/* 显示已选筛选条件 */}\r\n            {selectedCategories.length > 0 && (\r\n              <Tag closable onClose={() => {\r\n                setSelectedCategories([]);\r\n                executeSearch();\r\n              }}>\r\n                分类: {allCategories.find(c => c.id === selectedCategories[0])?.name}\r\n              </Tag>\r\n            )}\r\n            \r\n            {priceRange && (\r\n              <Tag closable onClose={() => {\r\n                setPriceRange(null);\r\n                setCustomPriceRange([null, null]);\r\n                executeSearch();\r\n              }}>\r\n                价格: {priceRange[0]}-{priceRange[1]}元\r\n              </Tag>\r\n            )}\r\n            \r\n            {selectedRating && (\r\n              <Tag closable onClose={() => {\r\n                setSelectedRating(null);\r\n                executeSearch();\r\n              }}>\r\n                评分: {selectedRating}星及以上\r\n              </Tag>\r\n            )}\r\n            \r\n            {(selectedCategories.length > 0 || priceRange || selectedRating) && (\r\n              <Button size=\"small\" onClick={clearAllFilters}>\r\n                清除所有\r\n              </Button>\r\n            )}\r\n          </Space>\r\n        </div>\r\n      </Card>\r\n      \r\n      {/* 搜索结果列表 */}\r\n      <Spin spinning={searchLoading}>\r\n        {searchResults.length > 0 ? (\r\n          <Row gutter={[16, 16]}>\r\n            {searchResults.map(renderProductCard)}\r\n          </Row>\r\n        ) : !searchLoading && (\r\n          <Empty\r\n            description={\r\n              <span>\r\n                没有找到相关商品<br />\r\n                请尝试其他关键词或调整筛选条件\r\n              </span>\r\n            }\r\n            style={{ padding: '60px 0' }}\r\n          >\r\n            <Button type=\"primary\" onClick={() => navigate('/')}>\r\n              返回首页\r\n            </Button>\r\n          </Empty>\r\n        )}\r\n      </Spin>\r\n      \r\n      {/* 分页 */}\r\n      {searchTotal > 0 && (\r\n        <div style={{ textAlign: 'center', marginTop: 32 }}>\r\n          <Pagination\r\n            current={searchCurrent}\r\n            total={searchTotal}\r\n            pageSize={12}\r\n            showSizeChanger\r\n            showQuickJumper\r\n            showTotal={(total, range) => \r\n              `第 ${range[0]}-${range[1]} 条，共 ${total} 条`\r\n            }\r\n            onChange={handlePageChange}\r\n            onShowSizeChange={handlePageChange}\r\n          />\r\n        </div>\r\n      )}\r\n      \r\n      {/* 筛选抽屉 */}\r\n      {renderFilterDrawer()}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default SearchResults; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
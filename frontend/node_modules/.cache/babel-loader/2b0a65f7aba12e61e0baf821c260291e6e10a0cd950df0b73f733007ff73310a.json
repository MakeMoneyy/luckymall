{"ast":null,"code":"import axios from'axios';// 创建axios实例\nconst api=axios.create({baseURL:process.env.REACT_APP_API_URL||'',timeout:15000,headers:{'Content-Type':'application/json'}});/**\r\n * 发送聊天消息\r\n * @param request 聊天请求参数\r\n * @returns 聊天响应\r\n */export const sendChatMessage=async request=>{try{const response=await api.post('/api/chat',request);return response.data;}catch(error){console.error('Error sending chat message:',error);throw error;}};/**\r\n * 获取流式聊天响应\r\n * @param request 聊天请求参数\r\n * @returns 聊天响应\r\n */export const sendStreamChatMessage=async request=>{try{const{userId,sessionId,message,context}=request;const params=new URLSearchParams();params.append('userId',userId);if(sessionId)params.append('sessionId',sessionId);params.append('message',message);if(context)params.append('context',JSON.stringify(context));const response=await api.get(`/api/chat/stream?${params.toString()}`);return response.data;}catch(error){console.error('Error sending stream chat message:',error);throw error;}};","map":{"version":3,"names":["axios","api","create","baseURL","process","env","REACT_APP_API_URL","timeout","headers","sendChatMessage","request","response","post","data","error","console","sendStreamChatMessage","userId","sessionId","message","context","params","URLSearchParams","append","JSON","stringify","get","toString"],"sources":["D:/luckymall/frontend/src/services/chatService.ts"],"sourcesContent":["import axios from 'axios';\r\n\r\nexport interface ChatRequest {\r\n  userId: string;\r\n  sessionId: string;\r\n  message: string;\r\n  context?: Record<string, any>;\r\n}\r\n\r\nexport interface ChatResponse {\r\n  result: string;\r\n  sessionId: string;\r\n  responseTime: number;\r\n  cacheHit: boolean;\r\n  error?: string;\r\n}\r\n\r\n// 创建axios实例\r\nconst api = axios.create({\r\n  baseURL: process.env.REACT_APP_API_URL || '',\r\n  timeout: 15000,\r\n  headers: {\r\n    'Content-Type': 'application/json',\r\n  },\r\n});\r\n\r\n/**\r\n * 发送聊天消息\r\n * @param request 聊天请求参数\r\n * @returns 聊天响应\r\n */\r\nexport const sendChatMessage = async (request: ChatRequest): Promise<ChatResponse> => {\r\n  try {\r\n    const response = await api.post<ChatResponse>('/api/chat', request);\r\n    return response.data;\r\n  } catch (error) {\r\n    console.error('Error sending chat message:', error);\r\n    throw error;\r\n  }\r\n};\r\n\r\n/**\r\n * 获取流式聊天响应\r\n * @param request 聊天请求参数\r\n * @returns 聊天响应\r\n */\r\nexport const sendStreamChatMessage = async (request: ChatRequest): Promise<ChatResponse> => {\r\n  try {\r\n    const { userId, sessionId, message, context } = request;\r\n    const params = new URLSearchParams();\r\n    params.append('userId', userId);\r\n    if (sessionId) params.append('sessionId', sessionId);\r\n    params.append('message', message);\r\n    if (context) params.append('context', JSON.stringify(context));\r\n    \r\n    const response = await api.get<ChatResponse>(`/api/chat/stream?${params.toString()}`);\r\n    return response.data;\r\n  } catch (error) {\r\n    console.error('Error sending stream chat message:', error);\r\n    throw error;\r\n  }\r\n}; "],"mappings":"AAAA,MAAO,CAAAA,KAAK,KAAM,OAAO,CAiBzB;AACA,KAAM,CAAAC,GAAG,CAAGD,KAAK,CAACE,MAAM,CAAC,CACvBC,OAAO,CAAEC,OAAO,CAACC,GAAG,CAACC,iBAAiB,EAAI,EAAE,CAC5CC,OAAO,CAAE,KAAK,CACdC,OAAO,CAAE,CACP,cAAc,CAAE,kBAClB,CACF,CAAC,CAAC,CAEF;AACA;AACA;AACA;AACA,GACA,MAAO,MAAM,CAAAC,eAAe,CAAG,KAAO,CAAAC,OAAoB,EAA4B,CACpF,GAAI,CACF,KAAM,CAAAC,QAAQ,CAAG,KAAM,CAAAV,GAAG,CAACW,IAAI,CAAe,WAAW,CAAEF,OAAO,CAAC,CACnE,MAAO,CAAAC,QAAQ,CAACE,IAAI,CACtB,CAAE,MAAOC,KAAK,CAAE,CACdC,OAAO,CAACD,KAAK,CAAC,6BAA6B,CAAEA,KAAK,CAAC,CACnD,KAAM,CAAAA,KAAK,CACb,CACF,CAAC,CAED;AACA;AACA;AACA;AACA,GACA,MAAO,MAAM,CAAAE,qBAAqB,CAAG,KAAO,CAAAN,OAAoB,EAA4B,CAC1F,GAAI,CACF,KAAM,CAAEO,MAAM,CAAEC,SAAS,CAAEC,OAAO,CAAEC,OAAQ,CAAC,CAAGV,OAAO,CACvD,KAAM,CAAAW,MAAM,CAAG,GAAI,CAAAC,eAAe,CAAC,CAAC,CACpCD,MAAM,CAACE,MAAM,CAAC,QAAQ,CAAEN,MAAM,CAAC,CAC/B,GAAIC,SAAS,CAAEG,MAAM,CAACE,MAAM,CAAC,WAAW,CAAEL,SAAS,CAAC,CACpDG,MAAM,CAACE,MAAM,CAAC,SAAS,CAAEJ,OAAO,CAAC,CACjC,GAAIC,OAAO,CAAEC,MAAM,CAACE,MAAM,CAAC,SAAS,CAAEC,IAAI,CAACC,SAAS,CAACL,OAAO,CAAC,CAAC,CAE9D,KAAM,CAAAT,QAAQ,CAAG,KAAM,CAAAV,GAAG,CAACyB,GAAG,CAAe,oBAAoBL,MAAM,CAACM,QAAQ,CAAC,CAAC,EAAE,CAAC,CACrF,MAAO,CAAAhB,QAAQ,CAACE,IAAI,CACtB,CAAE,MAAOC,KAAK,CAAE,CACdC,OAAO,CAACD,KAAK,CAAC,oCAAoC,CAAEA,KAAK,CAAC,CAC1D,KAAM,CAAAA,KAAK,CACb,CACF,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
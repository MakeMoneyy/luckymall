{"ast":null,"code":"import axios from 'axios';\n// 创建axios实例\nconst api = axios.create({\n  baseURL: 'http://localhost:8080',\n  timeout: 10000,\n  headers: {\n    'Content-Type': 'application/json'\n  }\n});\n\n// 请求拦截器\napi.interceptors.request.use(config => {\n  var _config$method;\n  // 在这里可以添加token等认证信息\n  console.log('发送请求:', (_config$method = config.method) === null || _config$method === void 0 ? void 0 : _config$method.toUpperCase(), config.url, '参数:', config.params || config.data);\n  return config;\n}, error => {\n  console.error('请求错误:', error);\n  return Promise.reject(error);\n});\n\n// 响应拦截器\napi.interceptors.response.use(response => {\n  const data = response.data;\n  console.log('收到响应:', response.status, data.message, '数据:', data.data);\n\n  // 检查业务状态码\n  if (data.code === 200) {\n    return response;\n  } else {\n    console.error('业务错误:', data.message);\n    return Promise.reject(new Error(data.message));\n  }\n}, error => {\n  console.error('响应错误详情:', error);\n  if (error.response) {\n    // 服务器返回错误状态码\n    const {\n      status,\n      statusText\n    } = error.response;\n    const message = `服务器错误 ${status}: ${statusText}`;\n    console.error('服务器返回错误:', message);\n    return Promise.reject(new Error(message));\n  } else if (error.request) {\n    var _error$config, _error$config2, _error$config3, _error$config4;\n    // 请求发送但没有收到响应\n    console.error('网络连接失败详情:', {\n      url: (_error$config = error.config) === null || _error$config === void 0 ? void 0 : _error$config.url,\n      method: (_error$config2 = error.config) === null || _error$config2 === void 0 ? void 0 : _error$config2.method,\n      baseURL: (_error$config3 = error.config) === null || _error$config3 === void 0 ? void 0 : _error$config3.baseURL,\n      timeout: (_error$config4 = error.config) === null || _error$config4 === void 0 ? void 0 : _error$config4.timeout,\n      message: error.message\n    });\n    return Promise.reject(new Error('网络连接失败，请检查后端服务是否启动'));\n  } else {\n    // 其他错误\n    console.error('其他错误:', error.message);\n    return Promise.reject(error);\n  }\n});\nexport default api;","map":{"version":3,"names":["axios","api","create","baseURL","timeout","headers","interceptors","request","use","config","_config$method","console","log","method","toUpperCase","url","params","data","error","Promise","reject","response","status","message","code","Error","statusText","_error$config","_error$config2","_error$config3","_error$config4"],"sources":["D:/luckymall/frontend/src/services/api.ts"],"sourcesContent":["import axios from 'axios';\r\nimport { ApiResponse } from '../types';\r\n\r\n// 创建axios实例\r\nconst api = axios.create({\r\n  baseURL: 'http://localhost:8080',\r\n  timeout: 10000,\r\n  headers: {\r\n    'Content-Type': 'application/json',\r\n  },\r\n});\r\n\r\n// 请求拦截器\r\napi.interceptors.request.use(\r\n  (config) => {\r\n    // 在这里可以添加token等认证信息\r\n    console.log('发送请求:', config.method?.toUpperCase(), config.url, '参数:', config.params || config.data);\r\n    return config;\r\n  },\r\n  (error) => {\r\n    console.error('请求错误:', error);\r\n    return Promise.reject(error);\r\n  }\r\n);\r\n\r\n// 响应拦截器\r\napi.interceptors.response.use(\r\n  (response) => {\r\n    const data: ApiResponse = response.data;\r\n    console.log('收到响应:', response.status, data.message, '数据:', data.data);\r\n    \r\n    // 检查业务状态码\r\n    if (data.code === 200) {\r\n      return response;\r\n    } else {\r\n      console.error('业务错误:', data.message);\r\n      return Promise.reject(new Error(data.message));\r\n    }\r\n  },\r\n  (error) => {\r\n    console.error('响应错误详情:', error);\r\n    \r\n    if (error.response) {\r\n      // 服务器返回错误状态码\r\n      const { status, statusText } = error.response;\r\n      const message = `服务器错误 ${status}: ${statusText}`;\r\n      console.error('服务器返回错误:', message);\r\n      return Promise.reject(new Error(message));\r\n    } else if (error.request) {\r\n      // 请求发送但没有收到响应\r\n      console.error('网络连接失败详情:', {\r\n        url: error.config?.url,\r\n        method: error.config?.method,\r\n        baseURL: error.config?.baseURL,\r\n        timeout: error.config?.timeout,\r\n        message: error.message\r\n      });\r\n      return Promise.reject(new Error('网络连接失败，请检查后端服务是否启动'));\r\n    } else {\r\n      // 其他错误\r\n      console.error('其他错误:', error.message);\r\n      return Promise.reject(error);\r\n    }\r\n  }\r\n);\r\n\r\nexport default api; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}